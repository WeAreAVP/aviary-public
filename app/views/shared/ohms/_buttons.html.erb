<%
this_interview = Interviews::Interview.find_by(id: interview.id)
color_metadata = this_interview.try(:interview_metadata_status)
index_color_metadata = this_interview.try(:index_status)

interview_transcript = interview.try(:file_transcripts)
interview_transcript = interview_transcript.first if interview_transcript.present?
text_color = 'color: #1a1aff;'
if interview_transcript.present?
  if interview_transcript.no_transcript
    text_color = 'color: #000;'
  elsif interview_transcript.associated_file_updated_at.present?
    text_color = 'color: #008b17;'
  end
end
html = '<div class="d-flex align-items-center"><div class="action-btn-holder btn-group">'
html += link_to 'Metadata', "#{request.path.include?('ohms_records') && !request.path.include?('ohms_index') ? 'javascript:void(0)' : ohms_records_edit_path(interview.id)}", class: "btn-interview btn-sm btn-link", style: color_metadata.to_s, data: {
  toggle: 'tooltip', placement: 'top', title: (this_interview.present? ? this_interview.listing_metadata_status[this_interview.metadata_status.to_s] : '')
}
html += link_to 'Index', "#{request.path.include?('ohms_index') ? 'javascript:void(0)' : ohms_index_path(interview.id)}", class: 'btn-interview btn-sm btn-link', style: this_interview.color_grading_index[index_color_metadata.to_s], data: {
  toggle: 'tooltip', placement: 'top', title: (this_interview.present? ? this_interview.listing_metadata_index_status[this_interview.index_status.to_s] : '')
}

if this_interview.try(:file_transcripts).present?
  html += link_to 'Sync', "#{request.path.include?('sync') ? 'javascript:void(0)' : sync_interviews_manager_path(interview.id)}", class: 'btn-interview btn-sm btn-link mr-1 float-left interview_transcript_sync ', id: 'interview_transcript_sync' + interview.id.to_s, data: {
    id: interview.id, url: sync_interviews_manager_path(interview.id, 'json'), updateurl: sync_interviews_manager_path(interview.id),
    toggle: 'tooltip', placement: 'top', title: this_interview.interview_sync_status.second
  }
end
html += '</div><div class="btn-interview-dropdown dropdown d-inline-block">'


html += '</div>'
html += '</div>'
%>
<%=html.html_safe%>