(this.webpackJsonpaviary_transcript=this.webpackJsonpaviary_transcript||[]).push([[0],{121:function(e,t,a){e.exports=a(224)},126:function(e,t,a){},128:function(e,t,a){},224:function(e,t,a){"use strict";a.r(t),a.d(t,"SlateTranscriptEditor",(function(){return tt})),a.d(t,"secondsToTimecode",(function(){return B})),a.d(t,"timecodeToSeconds",(function(){return J})),a.d(t,"shortTimecode",(function(){return V})),a.d(t,"convertDpeToSlate",(function(){return ae})),a.d(t,"converSlateToDpe",(function(){return me})),a.d(t,"slateToText",(function(){return ue}));var n=a(0),r=a.n(n),i=a(19),o=a.n(i),s=(a(126),a(11)),c=a.n(s),l=a(23),u=a(59),d=a(60),p=a(43),m=a(76),f=a(78),h=(a(128),a(104)),v=a.n(h),b=(a(141),a(81)),g=(a(158),a(105)),y=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).loadTranscript=function(e){try{fetch(atob(e.transcript)).then((function(e){return e.json()})).then((function(t){var a=t.media_url;t.env||(a=t.host+t.media_url);var r=t.transcript;"ibm"!==t.sst_type&&"slatejs"!==t.sst_type||(r=JSON.parse(r)),n.setState({transcriptData:r,mediaUrl:a,title:t.title,sttType:t.sst_type,isLoaded:!0,aviaryUrl:atob(e.transcript),resourceTitle:t.resource_title,metadata:t.metadata})}),(function(e){n.setState({isLoaded:!0,error:!0})}))}catch(t){n.setState({isLoaded:!0,error:!0})}},n.save=function(e){n.saveTranscript(e)},n.saveAndClose=function(e){n.saveTranscript(e,!0)},n.saveTranscriptTitle=function(e){n.setState({title:e})},n.saveMetadata=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({formEdit:!1}),a={file_transcript:{is_edit:!1,is_caption:t.isCaption,is_public:t.isPublic,is_downloadable:t.isDownloadable,description:t.description,language:t.language}},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=5,fetch(n.state.aviaryUrl+".json",r).then((function(e){return e.json()})).then((function(e){b.NotificationManager.success("","Transcript Metadata saved successfully.",3e3)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.saveTranscript=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,r,i,o,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]&&s[1],n.setState({formEdit:!1}),r={file_transcript:{slatejs:t,is_edit:!1,title:n.state.title},speakers:["allison","watson"]},i=g.a.gzip(JSON.stringify(r),{to:"string"}),o={method:"POST",headers:{"Content-Encoding":"gzip"},body:i},e.next=8,fetch(n.state.aviaryUrl+".json",o).then((function(e){return e.json()})).then((function(e){b.NotificationManager.success("","Transcript saved successfully.",3e3),a&&window.close()}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.cancelEditRequest=Object(l.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1,!0!==(!n.state.formEdit||window.confirm("Changes that you made may not be saved. Are you sure you want to cancel?"))){e.next=8;break}return n.setState({formEdit:!1}),t={file_transcript:{is_edit:!1}},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=8,fetch(n.state.aviaryUrl+".json",a).then((function(e){return e.json()})).then((function(e){window.close()}));case 8:case"end":return e.stop()}}),e)}))),n.state={transcriptData:null,mediaUrl:null,isTextEditable:!0,spellCheck:!0,sttType:null,analyticsEvents:[],title:"",resourceTitle:"",fileName:"",autoSaveData:{},autoSaveContentType:"slate",autoSaveExtension:"json",isLoaded:!1,error:!1,aviaryUrl:"",formEdit:!1,metadata:{}},n.editorRef=r.a.createRef(),n.cancelEditRequest=n.cancelEditRequest.bind(Object(p.a)(n)),n.loadTranscript=n.loadTranscript.bind(Object(p.a)(n)),n.save=n.save.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=v.a.parse(window.location.search);localStorage.setItem("transcript_finish",!1),"undefined"!=typeof e.transcript?this.loadTranscript(e):this.setState({isLoaded:!0,error:!0}),document.addEventListener("contextmenu",(function(e){return e.preventDefault()})),window.addEventListener("unload",function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("transcript_finish",!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"componentDidUpdate",value:function(){this.state.formEdit?window.onbeforeunload=function(){return!0}:window.onbeforeunload=void 0}},{key:"render",value:function(){return this.state.isLoaded&&!this.state.error?r.a.createElement("div",{className:"App"},r.a.createElement("section",{className:"ml-lg-3"},r.a.createElement(at,{mediaUrl:this.state.mediaUrl,transcriptData:this.state.transcriptData,handleSaveEditor:this.save,handleSaveAndClose:this.saveAndClose,handleSaveTranscriptTitle:this.saveTranscriptTitle,isEditable:this.state.isTextEditable,title:this.state.title,resourceTitle:this.state.resourceTitle,autoSaveContentType:"slate",showTitle:!0,mediaRef:this.editorRef,sttType:this.state.sttType,metadata:this.state.metadata,saveMetadata:this.saveMetadata})),r.a.createElement(b.NotificationContainer,null)):this.state.isLoaded?r.a.createElement("div",null," Transcript does not exist or you don't have the permission to access it. "):r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"}),r.a.createElement("span",{className:"loader-text"},"Please wait while the transcript is being loaded..."))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=a(92),w=a(106),k=a(10),E=a(90),T=a.n(E),j=a(118),S=a(26),O=a(117),C=a(16),N=a(116),R=a(28),D=a(13),A=a(15),I=a(230),F=a(229),L=a(35),M=a(36),U=a(1),P=a(47),_=a(119),K=a(46),z=a(45),B=function(e,t){if(0===e)return"00:00:00:00";var a=25;void 0!==t&&(a=t);var n=function(e,t){return Number((1/t*Math.floor(Number((t*e).toPrecision(12)))).toFixed(2))}(e,a),r=Math.floor(n),i=((n-r)*a).toFixed(2);function o(e){return e<10?"0".concat(parseInt(e)):parseInt(e)}return"".concat(o(r/60/60%60),":").concat(o(r/60%60),":").concat(o(r%60),":").concat(o(i))},W=function(e,t){var a=25;void 0!==t&&(a=t);var n=function(e,t){var a=e.split(":"),n=parseInt(a[3]);return n+=parseInt(a[2])*t,n+=parseInt(a[1])*(60*t),n+=parseInt(a[0])*(60*t*60)}(e,a);return Number(Number(n/a).toFixed(2))},G=function(e){return 1===e.length},H=function(e){if("string"!==typeof e)return e;switch(e.split(":").length){case 4:return e;case 2:return G(e.split(":")[0])?"00:0".concat(e,":00"):"00:".concat(e,":00");case 3:return"".concat(e,":00");default:return function(e){return e.includes(".")}(e)?G(e.split(".")[0])?"00:0".concat(e.split(".")[0],":").concat(e.split(".")[1],":00"):"00:".concat(e.replace(".",":"),":00"):G(e)?"00:00:0".concat(e,":00"):"00:00:".concat(e,":00")}},J=function(e){if("string"===typeof e){var t=H(e);return W(t)}return parseFloat(e)},V=function(e){return 0===e?"00:00:00":B(e).slice(0,-3)},q=function(e,t,a){var n=a||"application/octet-stream",r=document.createElement("a"),i=new Blob([e],{type:n});r.href=window.URL.createObjectURL(i),r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)},Y=a(77);function X(e,t,a){if(!Array.isArray(e))throw new TypeError("The first argument must be an array.");return e.filter((function(e){return e.to===a&&e.from===t}))[0]}function Z(e,t){if(!Array.isArray(e))throw new TypeError("Expected result to be an array");return e.map((function(e){return e.alternatives.map((function(e){return e.timestamps.map((function(e){return function(e,t){if(!Array.isArray(e)||e.length<3)throw new TypeError("Expected IBMWord to be an array with at least three elements");var a=Object(k.a)(e,3),n=a[0],r=a[1],i=a[2];return{start:r,end:i,text:n,speaker:t?X(t,r,i).speaker:null}}(e,t)}))}))}))}function $(e){var t=e.results,a=t[0].results||t,n=e.speaker_labels||e.results[0].speaker_labels,r=Z(a,n=n&&n.length>0?n:null);Array.isArray(r[0][0])&&(r=r.flat());return{paragraphs:(n?function(e,t){if(!Array.isArray(e)||0===e.length)return[];var a=[];return e.forEach((function(e,n){var r=e.alternatives[0].timestamps[0][1],i=e.alternatives[0].timestamps[e.alternatives[0].timestamps.length-1][2],o=X(t,r,e.alternatives[0].timestamps[0][2]).speaker;a.push({start:r,end:i,speaker:o})})),a}(a,n):function(e){if(!Array.isArray(e)||0===e.length)return[];var t=[];return e.forEach((function(e){var a=e.alternatives[0].timestamps[0][1],n=e.alternatives[0].timestamps[e.alternatives[0].timestamps.length-1][2];t.push({start:a,end:n,speaker:"Add speaker"})})),t}(a)).flat(),words:r.flat().flat()}}var Q=function(e,t){return t.filter((function(t){return t.start>=e.start&&t.end<=e.end})).map((function(e){return e.text})).join(" ")},ee=function(e){return(t=e[e.length-1].start)?Object(Y.a)(Array(parseInt(t)).keys()):[0];var t},te=function(e,t){return a=ee(e),n=t,a.splice(0,n,0).join(" ");var a,n},ae=function(e,t){if(a=e,0===Object.keys(a).length)return[{speaker:"U_UKN",start:0,previousTimings:"0",startTimecode:"00:00:00",type:"timedText",children:[{text:"Text",words:[]}]}];var a,n={};if("ibm"===t)n=$(e);else{if("vtt"!==t){if("slatejs"===t)return e;throw new Error("Invalid sttType")}n=function(e){var t=e.split("\n"),a={paragraphs:[],words:[]};function n(e){var t=e.split(":").map(Number),a=Object(k.a)(t,3),n=a[0],r=a[1],i=a[2];return 3600*n+60*r+parseFloat(i)}return t.forEach((function(e,r){if(e.includes("--\x3e")){var i,o=e.match(/(\d{2}:\d{2}:\d{2}.\d{3}) --> (\d{2}:\d{2}:\d{2}.\d{3})/),s=o?n(o[1]):0,c=o?n(o[2]):0,l=t[r+1]&&t[r+1].match(/<v ([a-zA-Z0-9]+)>/),u=l?l[1]:"Add speaker",d=t[r+1]&&t[r+1].replace(/<[^>]*>/g,"").trim();a.paragraphs.push({start:s,end:c,speaker:u});var p=d&&d.split(" "),m=(c-s)/(p?p.length:1),f=p&&p.map((function(e,t){return{start:s+t*m,end:s+(t+1)*m,text:e,speaker:u}}));(i=a.words).push.apply(i,Object(Y.a)(f||[]))}})),a}(e)}var r=n,i=r.words,o=r.paragraphs.map((function(e){return{speaker:e.speaker,start:e.start,previousTimings:te(i,e.start),startTimecode:V(e.start),type:"timedText",children:[{text:Q(e,i)}]}}));return o[0].children[0].words=i,o},ne=a(61),re=a(9),ie=function(e){var t,a=e.intervalSeconds,n=void 0===a?30:a,r=e.transcriptData,i=0,o=r.words.sort((function(e,t){return e.start-t.start})),s=[],c=Object(re.a)(o);try{for(c.s();!(t=c.n()).done;){var l=t.value;if(l.start-i>n){i=Math.floor(l.start/n)*n;var u=V(i);s.push({start:l.start,end:l.start+(l.end-l.start)/2,text:"[".concat(u,"]")}),l.start=l.start+(l.end-l.start)/2}s.push(l)}}catch(d){c.e(d)}finally{c.f()}return Object(ne.a)({},r,{words:s})},oe=function(e){return function(t){return Array.from(new Set(t.map((function(t){return t[e]}))))}},se=[{type:"srt",label:"Srt",ext:"srt"},{type:"vtt",label:"VTT",ext:"vtt"},{type:"vtt_speakers",label:"VTT with speakers",ext:"vtt"},{type:"itt",label:"iTT",ext:"itt"},{type:"ttml",label:"TTML",ext:"ttml"},{type:"premiereTTML",label:"TTML for Adobe Premiere",ext:"ttml"},{type:"csv",label:"CSV",ext:"csv"},{type:"pre-segment-txt",label:"Pre segmented txt",ext:"txt"},{type:"json",label:"Json",ext:"json"}],ce=function(e){return e.trim().replace(/\s\s+/g," ").split(" ").length},le=a(107),ue=function(e){var t=e.value,a=e.speakers,n=e.timecodes,r=e.atlasFormat;return t.map((function(e){return r?"".concat(n?"".concat(a?e.speaker:"","\t[").concat(V(e.start),"]\t"):"","\t").concat(U.c.string(e)):"".concat(n?"".concat(V(e.start),"\t"):"").concat(a?e.speaker.toUpperCase():"").concat(a||n?"\n":"").concat(U.c.string(e))})).join("\n\n")},de=function(e,t){var a=ue({value:e,speakers:!1,timecodes:!1,atlasFormat:!1});return Object(le.alignSTT)(t,a)},pe=function(e,t){return function(e,t){var a=[],n=0;for(var r in e){var i=e[r],o=i.children[0].text,s=ce(o),c=t.slice(n,n+s),l=i.speaker,u=parseFloat(c[0].start);l||(l="U_UKN");var d={type:"timedText",speaker:l,start:u,previousTimings:te(c,u),startTimecode:V(u),children:[{text:o}]};a.push(d),n+=s}return a}(e,de(e,t))},me=function(e,t){var a=de(e,t);return{words:a,paragraphs:function(e,t){var a=[],n=0;for(var r in e){var i=e[r],o=i.children[0].text,s=ce(o),c=t.slice(n,n+s),l=i.speaker;l||(l="U_UKN");var u={speaker:l,start:parseFloat(c[0].start),end:parseFloat(c[c.length-1].end)};a.push(u),n+=s}return a}(e,a)}},fe=a(20),he=function(e){var t=e.value,a=e.speakers,n=e.timecodes,r=e.inlineTimecodes,i=e.hideTitle,o=e.title,s=void 0===o?"Transcript":o,c=e.creator,l=void 0===c?"Slate Transcript Editor":c,u=e.description,d=void 0===u?"Transcript":u,p=new fe.Document({creator:l,description:d,title:s});if(!i){var m=new fe.TextRun(s),f=new fe.Paragraph;f.addRun(m),f.heading1().center(),p.addParagraph(f);var h=new fe.Paragraph;p.addParagraph(h)}t.forEach((function(e){var t=new fe.Paragraph;if(n){var i=new fe.TextRun(V(e.start));t.addRun(i)}if(a)if(n){var o=new fe.TextRun(e.speaker).bold().tab();t.addRun(o)}else{var s=new fe.TextRun(e.speaker).bold();t.addRun(s)}var c=U.c.string(e),l=new fe.TextRun("").break();if(r&&t.addRun(new fe.TextRun("".concat(e.speaker.toUpperCase(),":  ").concat(c))),(n||a||r)&&(p.addParagraph(t),p.addParagraph(new fe.Paragraph)),!r){var u=new fe.Paragraph(c);u.addRun(l),p.addParagraph(u)}})),(new fe.Packer).toBlob(p).then((function(e){var t="".concat(s,".docx"),a=document.createElement("a");return a.href=window.URL.createObjectURL(e),a.download=t,a.click(),e}))};var ve=function(e){return new Date(1e3*e.toFixed(3)).toISOString().substr(11,12)},be=a(109),ge=a.n(be);var ye=function(e,t){var a=null;void 0!==t&&(a=t);var n={newline_boundaries:!0,html_boundaries:!1,sanitize:!1,allowed_tags:!1,abbreviations:a};return ge.a.sentences(e,n).join("\n")};var xe=function(e){return e.replace(/\n/g,"\n\n")};var we=function(e){return e.replace(/\n /g,"\n")};var ke=function(e,t){return e.split("\n\n").map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35,a=0,n=e.map((function(e,n,r){if((a+=e.length+1)<=t){if(void 0!==r[n+1]){var i=r[n+1].length;return a+i<t?e:(a=0,"".concat(e,"\n"))}return e}return a=0,"".concat(e,"\n")}));return n}(e.split(" "),t)})).map((function(e){return e.join(" ")})).map((function(e){return we(e)})).join("\n\n")};var Ee=function(e){return e.map((function(e){return e.replace(/^\s+/g,"")}))};var Te=function(e){var t=e.split("\n"),a=0,n=t.map((function(e){return""===e?e:0===a?(a+=1,"."===e[e.length-1][0]?e+"\n\n":e+"\n"):1===a?(a=0,e+"\n\n"):void 0}));return n=(n=(n=Ee(n)).filter((function(e){return 0!==e.length}))).join("").trim()};function je(e){return e.map((function(e){return e.text})).join(" ")}var Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35,a=e;"object"===typeof e&&(a=je(e));var n=ye(a),r=xe(n),i=ke(r,t),o=Te(i);return o},Oe=/&/g,Ce=/</g,Ne=/>/g,Re=function(e){return e.replace(Oe,"&amp;").replace(Ce,"&lt;").replace(Ne,"&gt;")},De=function(e){var t='<?xml version="1.0" encoding="UTF-8" standalone="no" ?>\n    <tt xmlns="http://www.w3.org/ns/ttml"\n    xmlns:ttp="http://www.w3.org/ns/ttml#parameter"\n    ttp:timeBase="media"\n    xmlns:m608="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt#cea608"\n    xmlns:smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"\n    xmlns:ttm="http://www.w3.org/ns/ttml#metadata">\n    <head>\n    <metadata>\n    <smpte:information m608:captionService="F1C1CC" m608:channel="cc1"/>\n    </metadata>\n    <styling></styling>\n    <layout></layout>\n    </head>\n    <body><div>';return e.forEach((function(e){t+='<p begin="'.concat(ve(parseFloat(e.start)),'" end="').concat(ve(parseFloat(e.end)),'">').concat(Re(e.text).replace(/\n/g,"<br />"),"</p>\n")})),"".concat(t+="</div>\n</body>\n</tt>")},Ae=a(110),Ie=a.n(Ae),Fe=function(e,t){return Ie()(Math.round(e),t,!1).toString().replace(/^00/,"01")},Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-GB",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,n='<?xml version="1.0" encoding="UTF-8"?>\n        <tt\n          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n          xmlns="http://www.w3.org/ns/ttml"\n          xmlns:tt="http://www.w3.org/ns/ttml"\n          xmlns:tts="http://www.w3.org/ns/ttml#styling"\n          xmlns:ttp="http://www.w3.org/ns/ttml#parameter"\n          xml:lang="'.concat(t,'"\n          ttp:timeBase="smpte"\n          ttp:frameRate="').concat(a,'"\n          ttp:frameRateMultiplier="').concat(25===a?"1 1":"999 1000",'"\n          ttp:dropMode="nonDrop"\n        >\n        <head>\n          <styling>\n            <style\n              xml:id="normal"\n              tts:fontFamily="sansSerif"\n              tts:fontWeight="normal"\n              tts:fontStyle="normal"\n              tts:color="white"\n              tts:fontSize="100%"\n            />\n          </styling>\n          <layout>\n            <region\n              xml:id="bottom"\n              tts:origin="0% 85%"\n              tts:extent="100% 15%"\n              tts:textAlign="center"\n              tts:displayAlign="after"\n            />\n          </layout>\n        </head>\n        <body style="normal" region="bottom">\n          <div begin="-01:00:00:00">');return e.forEach((function(e){n+='<p begin="'.concat(Fe(parseFloat(e.start)*a,a),'" end="').concat(Fe(parseFloat(e.end)*a,a),'">').concat(Re(e.text).replace(/\n/g,"<br />"),"</p>\n")})),n+="</div>\n</body>\n</tt>"},Me=function(e){var t='<?xml version="1.0" encoding="UTF-8"?>\n    <tt xmlns="http://www.w3.org/ns/ttml">\n    <head></head>\n    <body>\n    <div>';return e.forEach((function(e){t+='<p begin="'.concat(ve(parseFloat(e.start)),'" end="').concat(ve(parseFloat(e.end)),'">').concat(Re(e.text).replace(/\n/g,"<br />"),"</p>\n")})),t+="</div>\n</body>\n</tt>"},Ue=function(e){var t="";return e.forEach((function(e,a){t+="".concat(a+1,"\n").concat(ve(parseFloat(e.start)).replace(".",",")," --\x3e ").concat(ve(parseFloat(e.end)).replace(".",","),"\n").concat(e.text.trim(),"\n\n")})),t},Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="WEBVTT\n\n";return e.forEach((function(e,n){a+="".concat(n+1,"\n").concat(ve(parseFloat(e.start))," --\x3e ").concat(ve(parseFloat(e.end)),"\n").concat(t?"<v ".concat(e.speaker,">"):"").concat(e.text,"\n\n")})),a};var _e=function(e){var t="N, In, Out, Text\n";return e.forEach((function(e,a){t+="".concat(a+1,","),t+='"'.concat(ve(parseFloat(e.start)).replace(".",","),'","').concat(ve(parseFloat(e.end)).replace(".",","),'",'),t+='"'.concat(e.text.replace(/\n/g,"\r\n"),'"\n')})),t};function Ke(e){var t=e.split("\n\n");return t=t.map((function(e){return e.trim()}))}function ze(e,t,a){e=e.filter((function(e){return e.text.length>0}));var n=0,r=0;return a.map((function(a){r+=ce(a);var i={text:a.trim()};i.start=e[n].start,i.end=e[r-1].end;var o=t.filter((function(e){return i.start>=e.start&&i.start<e.end})).map((function(e){var t=(Math.min(i.end,e.end)-i.start)/(i.end-i.start);return Object(ne.a)({},e,{pctInParagraph:t})})).sort((function(e,t){return t.pctInParagraph-e.pctInParagraph||e.start-t.start}));return i.speaker=o.length>0?o[0].speaker:"UNKNOWN",n=r,i}))}function Be(e,t){var a,n=[],r="0",i=t.sort((function(e,t){return e.start-t.start})),o=Object(re.a)(e);try{var s=function(){var e=a.value,t=e.text,o=e.start,s=i.filter((function(e){return e.start<=o&&e.end>=o}))[0];s.id!==r&&(r=s.id,n.push("\n\n")),n.push(t)};for(o.s();!(a=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}return n.join(" ")}var We=function(e){var t=e.words,a=e.paragraphs,n=e.type,r=e.numberOfCharPerLine,i=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Ke(n?Be(e,t):Se(e,a));return ze(e,t,r)}(t,a,r,"vtt_speakers_paragraphs"===n);if("string"===typeof t)return Se(t,r);switch(n){case"premiereTTML":return De(i);case"ttml":return Me(i);case"itt":return Le(i);case"srt":return Ue(i);case"vtt":return Pe(i);case"vtt_speakers":case"vtt_speakers_paragraphs":return Pe(i,!0);case"json":return i.map((function(e){return e.start=ve(parseFloat(e.start)).replace(".",","),e.end=ve(parseFloat(e.end)).replace(".",","),e}));case"csv":return _e(i);case"pre-segment-txt":case"txt":return Se(t,r);default:return"Could not find the subtitle format"}},Ge=se.map((function(e){return e.type})),He=function(e){var t=e.slateValue,a=e.type,n=(e.ext,e.transcriptTitle),r=e.speakers,i=e.timecodes,o=e.inlineTimecodes,s=e.hideTitle,c=e.atlasFormat,l=e.dpeTranscriptData;switch(a){case"text":return ue({value:t,speakers:r,timecodes:i,atlasFormat:c});case"json-slate":return t;case"json-digitalpaperedit":return me(t,l);case"word":return he({title:n,value:t,speakers:r,timecodes:i,inlineTimecodes:o,hideTitle:s});default:if(function(e){return Ge.includes(e)}(a)){var u=me(t,t[0].children[0]);return u.paragraphs.forEach((function(e){"Add speaker"===e.speaker&&(e.speaker="")})),We({words:u.words,paragraphs:u.paragraphs,type:a})}return console.error("Did not recognise the export format ",a),"Did not recognise the export format"}};var Je=function(e){return 0===Object.keys(e).length},Ve=a(21),qe=function(e,t){if(Je(t))return"";var a=t[t.length-1].start,n=parseInt(a),r=Array(n);return Object(Ve.a)(r.keys()).splice(0,e,0).join(" ")},Ye={ab:"Abkhazian",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari languages",bi:"Bislama",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan, Valencian",km:"Central Khmer",ch:"Chamorro",ce:"Chechen",ny:"Chichewa, Chewa, Nyanja",zh:"Chinese","zh-TW":"Chinese (Traditional)",cu:"Church Slavonic, Old Bulgarian, Old Church Slavonic",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree","zh-Hans":"Chinese (Simplified)","zh-Hant":"Chinese (Traditional)",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Divehi, Dhivehi, Maldivian",nl:"Dutch, Flemish",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",fil:"Filipino","fr-FR":"French",fr:"French",ff:"Fulah",gd:"Gaelic, Scottish Gaelic",gl:"Galician",lg:"Ganda",ka:"Georgian",de:"German",ki:"Gikuyu, Kikuyu",el:"Greek (Modern)",kl:"Greenlandic, Kalaallisut",gn:"Guarani",gu:"Gujarati",ht:"Haitian, Haitian Creole",ha:"Hausa",haw:"Hawaiian",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",is:"Icelandic",io:"Ido",ig:"Igbo",id:"Indonesian",ia:"Interlingua (International Auxiliary Language Association)",ie:"Interlingue",iu:"Inuktitut",ik:"Inupiaq",iw:"Hebrew",ga:"Irish",it:"Italian",ja:"Japanese",jv:"Javanese",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",kri:"Krio",rw:"Kinyarwanda",kv:"Komi",kg:"Kongo",ko:"Korean",kj:"Kwanyama, Kuanyama",ku:"Kurdish",ky:"Kyrgyz",lo:"Lao",la:"Latin",lv:"Latvian",lb:"Letzeburgesch, Luxembourgish",li:"Limburgish, Limburgan, Limburger",ln:"Lingala",lt:"Lithuanian",lu:"Luba-Katanga",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",gv:"Manx",mi:"Maori",mr:"Marathi",mh:"Marshallese",ro:"Moldovan, Moldavian, Romanian",mn:"Mongolian",nso:"Northern Sotho",na:"Nauru",nv:"Navajo, Navaho",nd:"Northern Ndebele",ng:"Ndonga",ne:"Nepali",se:"Northern Sami",no:"Norwegian",nb:"Norwegian Bokm\xe5l",nn:"Norwegian Nynorsk",ii:"Nuosu, Sichuan Yi",oc:"Occitan (post 1500)",oj:"Ojibwa",or:"Oriya",om:"Oromo",os:"Ossetian, Ossetic",pi:"Pali",pa:"Panjabi, Punjabi",ps:"Pashto, Pushto",fa:"Persian",pl:"Polish",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Rundi",ru:"Russian",sm:"Samoan",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sr:"Serbian",sn:"Shona",sd:"Sindhi",si:"Sinhala, Sinhalese",sk:"Slovak",sl:"Slovenian",so:"Somali",st:"Sotho, Southern",nr:"South Ndebele",es:"Spanish","es-419":"Spanish (Latin America)",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",tl:"Tagalog",ty:"Tahitian",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",bo:"Tibetan",ti:"Tigrinya",to:"Tonga (Tonga Islands)",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",tw:"Twi",ug:"Uighur, Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volap_k",wa:"Walloon",cy:"Welsh",fy:"Western Frisian",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang, Chuang",zu:"Zulu"},Xe=a(120),Ze=function(e){var t=e.match(/[?&]v=([^&#]+)/);return t?t[1]:""},$e=function(e){var t=Object(n.useRef)(null),a=e.mediaUrl.includes("youtube.com");return r.a.createElement("div",{className:"wd-100"},a?r.a.createElement(Xe.a,{videoId:Ze(e.mediaUrl),opts:{playerVars:{autoplay:0,fs:0,loop:1,showinfo:0,modestbranding:1,playsinline:1,enablejsapi:1}},onReady:function(a){t.current=a.target,e.setPlayer(t)},iframeClassName:"wd-100 height-25vh"}):r.a.createElement("video",{ref:e.mediaRef,src:e.mediaUrl,width:e.width,height:e.height,controls:!0,playsInline:!0}))};function Qe(){var e=Object(w.a)(["\n          font-weight: ",";\n          background-color: ",";\n        "]);return Qe=function(){return e},e}var et=[.2,.25,.5,.75,1,1.25,1.5,1.75,2,2.25,2.5,3,3.5];function tt(e){var t=this,a=Object(n.useState)(null),i=Object(k.a)(a,2),o=i[0],s=i[1],u=Object(n.useRef)(null),d=Object(n.useState)(0),p=Object(k.a)(d,2),m=p[0],f=p[1],h=Object(n.useState)(0),v=Object(k.a)(h,2),b=(v[0],v[1]),g=Object(n.useState)(1),y=Object(k.a)(g,2),w=y[0],E=y[1],B=Object(n.useMemo)((function(){return Object(P.d)(Object(_.a)(Object(U.i)()))}),[]),W=Object(n.useState)([]),G=Object(k.a)(W,2),H=G[0],Y=G[1],X="boolean"!==typeof e.showSpeakers||e.showSpeakers,Z="boolean"!==typeof e.showTimecodes||e.showTimecodes,$=Object(n.useState)(X),Q=Object(k.a)($,2),ee=Q[0],te=Q[1],ne=Object(n.useState)(Z),re=Object(k.a)(ne,2),ce=re[0],le=(re[1],Object(n.useState)([])),ue=Object(k.a)(le,2),de=(ue[0],ue[1]),me=Object(n.useState)(!1),fe=Object(k.a)(me,2),he=fe[0],ve=(fe[1],Object(n.useState)(null)),be=Object(k.a)(ve,2),ge=be[0],ye=be[1],xe=Object(n.useState)(!1),we=Object(k.a)(xe,2),ke=we[0],Ee=we[1],Te=Object(n.useState)(!1),je=Object(k.a)(Te,2),Se=je[0],Oe=je[1],Ce=Object(n.useState)(!1),Ne=Object(k.a)(Ce,2),Re=Ne[0],De=Ne[1],Ae=Object(n.useState)(""),Ie=Object(k.a)(Ae,2),Fe=Ie[0],Le=Ie[1],Me=Object(n.useState)(""),Ue=Object(k.a)(Me,2),Pe=Ue[0],_e=Ue[1],Ke=Object(n.useState)(e.metadata.description),ze=Object(k.a)(Ke,2),Be=ze[0],We=ze[1],Ge=Object(n.useState)(e.metadata.language),Je=Object(k.a)(Ge,2),Ve=Je[0],Xe=Je[1],Ze=Object(n.useState)(!!e.metadata.is_public),tt=Object(k.a)(Ze,2),at=tt[0],nt=tt[1],rt=Object(n.useState)(!!e.metadata.is_caption),it=Object(k.a)(rt,2),ot=it[0],st=it[1],ct=Object(n.useState)(!!e.metadata.is_downloadable),lt=Object(k.a)(ct,2),ut=lt[0],dt=lt[1];Object(n.useEffect)((function(){document.body.style.cursor=Se?"wait":"default"}),[Se]),Object(n.useEffect)((function(){if(e.transcriptData){var t=ae(e.transcriptData,e.sttType);Y(t)}}),[]),Object(n.useEffect)((function(){if(e.transcriptDataLive){var t=ae(e.transcriptDataLive,e.sttType);if(B.selection){var a=[B.children.length];U.h.insertNodes(B,t,{at:a})}else U.h.insertNodes(B,t)}}),[e.transcriptDataLive]),Object(n.useEffect)((function(){var e=oe("speaker")(H);de(e)}),[he]),Object(n.useEffect)((function(){return e.mediaRef&&e.mediaRef.current&&e.mediaRef.current.addEventListener("timeupdate",ft),function(){e.mediaUrl.includes("youtube.com")||e.mediaRef.current.removeEventListener("timeupdate",ft)}}),[]),Object(n.useEffect)((function(){e.mediaRef&&e.mediaRef.current&&(b(e.mediaRef.current.duration),e.mediaRef.current.duration>=3600&&(te(!1),ce(!1)))}),[e.mediaRef]);var pt=function(){return e.title?e.title:T.a.basename(e.mediaUrl).trim()},mt=function(){var t=T.a.extname(e.mediaUrl),a=e.mediaType?e.mediaType:"video";return".wav"!==t&&".mp3"!==t&&".m4a"!==t&&".flac"!==t&&".aiff"!==t||(a="audio"),a},ft=function(t){f(t.target.currentTime),b(e.mediaRef.current.duration)};Object(n.useEffect)((function(){o&&(u.current=o.current)}),[o]);var ht=Object(n.useCallback)((function(e){switch(e.element.type){case"timedText":return r.a.createElement(xt,e);default:return r.a.createElement(Tt,e)}}),[]),vt=Object(n.useCallback)((function(e){var t=Object(k.a)(e,2),a=t[0],n=t[1],r=[];if(Fe&&U.g.isText(a)){var i=a.text.split(Fe),o=0;i.forEach((function(e,t){0!==t&&r.push({anchor:{path:n,offset:o-Fe.length},focus:{path:n,offset:o},highlight:!0}),o=o+e.length+Fe.length}))}return r}),[Fe]),bt=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,r,i,o,s,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=P.b.findPath(B,t),n=t.speaker,e.next=4,gt("Change speaker name",n,!0);case 4:if(!(r=e.sent)){e.next=15;break}return i="Would you like to replace all occurrences of ".concat(n," with ").concat(r," ( Cancel to replace just this one )"),o="Would you like to add speaker ".concat(r," to this line or all lines? ( Cancel to add just this one )"),e.next=10,gt("add speaker"!==n.toString().toLowerCase()?i:o,null,!1);case 10:e.sent?(s=U.a.range(B,[]),U.h.setNodes(B,{type:"timedText",speaker:r},{at:s,match:function(e){return"timedText"===e.type&&e.speaker.toString().toLowerCase()===n.toString().toLowerCase()}})):U.h.setNodes(B,{type:"timedText",speaker:r},{at:a}),l=Et(B.children),u=l<17?l+1:17,document.querySelectorAll(".speakers-col").forEach((function(e){e.style.minWidth=u+"ch"}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=function(e,t,a){return new Promise((function(n){var r=document.createElement("div");r.setAttribute("role","dialog"),r.setAttribute("aria-modal","true"),r.setAttribute("aria-labelledby","promptMessage"),r.style.position="fixed",r.style.top="50%",r.style.left="50%",r.style.transform="translate(-50%, -50%)",r.style.backgroundColor="#fff",r.style.padding="20px",r.style.zIndex="9999";var i=document.createElement("p");i.setAttribute("id","promptMessage"),i.textContent=e,r.appendChild(i);var o=document.createElement("input");a&&(o.setAttribute("type","text"),o.setAttribute("aria-label",e),o.value=t||"",r.appendChild(o));var s=document.createElement("button");s.textContent="OK",s.addEventListener("click",(function(){n(!a||o.value),document.body.removeChild(r)})),r.appendChild(s);var c=document.createElement("button");c.textContent="Cancel",c.addEventListener("click",(function(){n(null),document.body.removeChild(r)})),r.appendChild(c),document.body.appendChild(r),(a?o:s).focus()}))},yt=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=P.b.findPath(B,t),n=t.startTimecode,e.next=4,gt("Change timecode",n,!0);case 4:r=e.sent,i=/^(?:[01]\d|2[0-3]):(?:[0-5]\d):(?:[0-5]\d)$/,r&&i.test(r)?U.h.setNodes(B,{type:"timedText",startTimecode:r,start:J(r)},{at:a}):alert("Please enter the timecode in the correct format HH:MM:SS");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xt=function(e){return ee||ce?ee&&!ce?(9,9):!ee&&ce?(9,10):ee&&ce&&(6,7):(12,12),r.a.createElement(R.a,Object.assign({},e.attributes,{className:"mb-3 border-bottom pb-3",style:{textAlign:"rtl"===e.attributes.dir?"right":"left"}}),ce&&r.a.createElement(D.a,{contentEditable:!1,className:"text-truncate p-0 pl-3 col-auto"},r.a.createElement("code",{contentEditable:!1,style:{cursor:"pointer"},className:"timecode text-muted unselectable",onClick:jt,title:e.element.startTimecode,"data-start":e.element.start},e.element.startTimecode,r.a.createElement(M.a,{delay:1e3,placement:"bottom",overlay:r.a.createElement(L.a,{id:"tooltip-disabled"},"Edit the timecode to change to whatever you want")},r.a.createElement(z.a,{icon:K.a,onClick:yt.bind(t,e.element),onKeyDown:function(t){return kt(t,e.element)},pull:"left",className:"mt-1",tabIndex:0,role:"button",title:"Edit Timecode"+e.element.startTimecode,"aria-label":"Edit timecode"+e.element.startTimecode})))),ee&&r.a.createElement(D.a,{contentEditable:!1,className:"p-0 pl-3 text-left col-auto speakers-col",style:{minWidth:Et(B.children)+"ch",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"17ch"}},r.a.createElement("span",{contentEditable:!1,className:"text-muted",tabIndex:0,style:{cursor:"pointer",textTransform:"Add speaker"!==e.element.speaker?"uppercase":"",fontStyle:"Add speaker"===e.element.speaker?"italic":"normal"},title:e.element.speaker,onClick:bt.bind(t,e.element),onKeyDown:function(t){return wt(t,e.element)}},e.element.speaker)),r.a.createElement(D.a,{className:"p-b-1 wd-fit",tabIndex:1},e.children))},wt=function(e,t){" "!==e.key&&"Spacebar"!==e.key||(e.preventDefault(),bt(t))},kt=function(e,t){" "!==e.key&&"Spacebar"!==e.key||(e.preventDefault(),yt(t))},Et=function(e){var t=0;return e.forEach((function(e){e.speaker&&e.speaker.length>t&&(t=e.speaker.length)})),t>17?17:t+1},Tt=function(e){return r.a.createElement("p",e.attributes,e.children)},jt=function(t){if(t.target.classList.contains("timecode"))if(u&&u.current){var a=parseFloat(t.target.dataset.start);u.current.seekTo(a,!0)}else{var n=t.target.dataset.start;e.mediaRef&&e.mediaRef.current&&(e.mediaRef.current.currentTime=parseFloat(n),e.mediaRef.current.play())}else if(t.target.dataset.slateString&&t.target.parentNode.dataset.start){var r=t.target.parentNode.dataset.start;e.mediaRef&&e.mediaRef.current&&r&&(e.mediaRef.current.currentTime=parseFloat(r),e.mediaRef.current.play())}},St=function(){var t=Object(l.a)(c.a.mark((function t(){var a,n,r,i,o=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=o.length>0&&void 0!==o[0]&&o[0],Re||a){t.next=3;break}return t.abrupt("return",H);case 3:if(!a){t.next=13;break}return n=ie({transcriptData:e.transcriptData}),t.next=7,pe(ae(n,e.sttType),n);case 7:return r=t.sent,Y(r),De(!1),t.abrupt("return",r);case 13:return t.next=15,pe(H,e.transcriptData);case 15:return i=t.sent,Y(i),De(!1),t.abrupt("return",i);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ot=function(){var t=Object(l.a)(c.a.mark((function t(a){var n,r,i,o,s,l,u,d,p,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.type,r=a.ext,i=a.speakers,o=a.timecodes,s=a.inlineTimecodes,l=a.hideTitle,u=a.atlasFormat,d=a.isDownload,t.prev=1,Oe(!0),p=H,!o){t.next=8;break}return t.next=7,St();case 7:p=t.sent;case 8:if(!s){t.next=12;break}return t.next=11,St(s);case 11:p=t.sent;case 12:return m=He({slateValue:p,type:n,transcriptTitle:pt(),speakers:i,timecodes:o,inlineTimecodes:s,hideTitle:l,atlasFormat:u,dpeTranscriptData:e.transcriptData}),"json"===r&&(m=JSON.stringify(m,null,2)),"docx"!==r&&d&&q(m,"".concat(pt(),".").concat(r)),t.abrupt("return",m);case 16:return t.prev=16,Oe(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,,16,19]])})));return function(e){return t.apply(this,arguments)}}(),Ct=function(){var t=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{Oe(!0),a=e.autoSaveContentType?e.autoSaveContentType:"digitalpaperedit",Ot({type:"json-".concat(a),isDownload:!1}).then((function(t){e.handleSaveEditor&&e.handleSaveEditor(t)}))}finally{Oe(!1)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Nt=function(){var t=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{Oe(!0),a=e.autoSaveContentType?e.autoSaveContentType:"digitalpaperedit",Ot({type:"json-".concat(a),isDownload:!1}).then((function(t){e.handleSaveAndClose&&e.handleSaveAndClose(t)}))}finally{Oe(!1)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(N.a,{fluid:!0,style:{backgroundColor:"#eee",height:"100vh",paddingTop:"1em"}},r.a.createElement("style",{scoped:!0},'\n              /* Next words */\n             .timecode[data-previous-timings*="'.concat(qe(parseInt(m),H),'"]{\n                  color:  #9E9E9E;\n              }\n          ')),r.a.createElement("style",{scoped:!0},".editor-wrapper-container{\n                padding: 8px 16px;\n                background: #f9f9f9;\n                box-shadow: 0 0 10px #ccc;\n                height: 90vh;\n                overflow: auto;\n              }\n              /* https://developer.mozilla.org/en-US/docs/Web/CSS/user-select\n              TODO: only working in Chrome, not working in Firefox, and Safari - OSX\n              if selecting text, not showing selection\n              Commented out because it means cannot select speakers and timecode anymore\n              which is the intended default behavior but needs to come with export\n              functionality to export as plain text, word etc.. otherwise user won't be able\n              to get text out of component with timecodes and speaker names in the interim */\n              .unselectable {\n                -moz-user-select: none;\n                -webkit-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n              }\n              .timecode:hover{\n                text-decoration: underline;\n              }\n              .timecode.text:hover{\n                text-decoration:none;\n              }\n              "),r.a.createElement(R.a,null,e.showTitle?r.a.createElement("div",{className:"text-truncate text-left top-title"},r.a.createElement("span",null,"Editing transcript "),r.a.createElement(M.a,{placement:"bottom",overlay:r.a.createElement(L.a,{id:"tooltip-disabled"},"Click and edit to edit the transcript title and then hit save icon to save it")},r.a.createElement("span",{className:"display-inline fw-bold editable",contentEditable:!0,onBlur:function(t){t.keycode>=37&&t.keycode<=40||(t.keycode>=13?t.preventDefault():e.handleSaveTranscriptTitle(t.target.innerHTML))}},e.title)),r.a.createElement("span",null," of "),r.a.createElement("span",{className:"display-inline fw-bold"},e.resourceTitle)):null,r.a.createElement("div",{className:"find-replace-container"},r.a.createElement(A.a,null,r.a.createElement(R.a,null,r.a.createElement(D.a,{className:"tl-right",xs:3,sm:3,md:3,lg:7,xl:8},r.a.createElement(A.a.Group,{controlId:"findReplaceContentFields"},r.a.createElement(R.a,null,r.a.createElement(D.a,null,r.a.createElement(A.a.Control,{as:"input",value:Fe,placeholder:"Find",onChange:function(e){return Le(e.target.value)}})),r.a.createElement(D.a,null,r.a.createElement(A.a.Control,{as:"input",placeholder:"Replace",value:Pe,onChange:function(e){return _e(e.target.value)}}))))),r.a.createElement(D.a,{className:"tl-right",xs:3,sm:3,md:3,lg:4,xl:4},r.a.createElement(R.a,null,r.a.createElement(D.a,{className:"pl-0 pr-0"},r.a.createElement(S.a,{variant:"primary",onClick:function(){for(var e=B.children,t=0;t<e.length;t++){var a=e[t].children[0].text,n=a.replace(Fe,Pe),r=JSON.parse(JSON.stringify(e[t]));if(r.children[0].text=n,U.h.insertNodes(B,Object(x.a)({},r),{at:[t]}),U.h.removeNodes(B,{at:[t+1]}),a.includes(Fe))return}},className:"btn-update-description replace-btn"},"Replace One")),r.a.createElement(D.a,{className:"pl-0"},r.a.createElement(S.a,{variant:"primary",onClick:function(){for(var e=B.children,t=0;t<e.length;t++){var a=e[t].children[0].text.replaceAll(Fe,Pe),n=JSON.parse(JSON.stringify(e[t]));n.children[0].text=a,U.h.insertNodes(B,Object(x.a)({},n),{at:[t]}),U.h.removeNodes(B,{at:[t+1]})}},className:"btn-update-description replace-btn"},"Replace All")))))))),r.a.createElement(R.a,null,r.a.createElement(D.a,{xs:{span:12,order:1},sm:"audio"===mt()?{span:10,offset:1}:3,md:"audio"===mt()?{span:10,offset:1}:3,lg:"audio"===mt()?{span:8,offset:2}:3,xl:"audio"===mt()?{span:8,offset:2}:3,className:"d-flex flex-column"},r.a.createElement(R.a,null,r.a.createElement($e,{mediaRef:e.mediaRef,mediaUrl:e.mediaUrl,width:"100%",height:"audio"===mt()?"60em":"auto",controls:!0,playsInline:!0,setPlayer:function(e){s(e)}})),r.a.createElement(R.a,null,r.a.createElement(D.a,{xs:5,sm:1,md:1,lg:1,xl:2,className:"pt-1 pl-0"},r.a.createElement(S.a,{variant:"primary",onClick:Nt,className:"btn-update-description save-close-btn"},"Save & Close")),r.a.createElement(D.a,{xs:4,sm:2,md:2,lg:2,xl:2,className:"p-1 ml-auto",style:{marginRight:"5px"}},r.a.createElement(A.a.Control,{as:"select",defaultValue:w,onChange:function(t){var a=parseFloat(t.target.value);e.mediaRef&&e.mediaRef.current?(e.mediaRef.current.playbackRate=a,E(a)):u&&u.current&&u.current.setPlaybackRate(a)},title:"Change the playback speed of the player",className:"p-0"},et.map((function(e,t){return r.a.createElement("option",{key:t+e,value:e},"x ",e)})))),r.a.createElement(D.a,{xs:3,sm:3,md:3,lg:2,xl:1,className:"p-1"},r.a.createElement(M.a,{delay:1e3,placement:"bottom",overlay:r.a.createElement(L.a,{id:"tooltip-disabled"},"Seek back by ".concat(15," seconds"))},r.a.createElement("span",{className:"d-inline-block"},r.a.createElement(S.a,{variant:"light",onClick:function(){if(e.mediaRef&&e.mediaRef.current)e.mediaRef.current.currentTime=e.mediaRef.current.currentTime-15;else if(u&&u.current){var t=u.current.getCurrentTime();u.current.seekTo(t-15)}},block:!0,className:"fs-17"},r.a.createElement(z.a,{icon:K.e}))))),r.a.createElement(D.a,{xs:3,sm:3,md:3,lg:2,xl:1,className:"p-1",style:{marginLeft:"15px"}},r.a.createElement(M.a,{OverlayTrigger:!0,delay:2e3,placement:"bottom",overlay:r.a.createElement(L.a,{id:"tooltip-disabled"},"Export options")},r.a.createElement("span",{className:"d-inline-block"},r.a.createElement(O.a,{disabled:Se,id:"dropdown-basic-button",title:r.a.createElement(z.a,{icon:K.b}),variant:"light"},r.a.createElement(C.a.Item,{style:{color:"black"},disabled:!0},r.a.createElement("b",null,"Text Export")),r.a.createElement(C.a.Item,{onClick:function(){Ot({type:"text",ext:"txt",speakers:!1,timecodes:!1,isDownload:!0})}},"Text (",r.a.createElement("code",null,".txt"),")"),r.a.createElement(C.a.Item,{onClick:function(){Ot({type:"text",ext:"txt",speakers:!0,timecodes:!1,isDownload:!0})}},"Text (Speakers)"),r.a.createElement(C.a.Item,{onClick:function(){Ot({type:"text",ext:"txt",speakers:!1,timecodes:!0,isDownload:!0})}},"Text (Timecodes)"),r.a.createElement(C.a.Item,{onClick:function(){Ot({type:"text",ext:"txt",speakers:!0,timecodes:!0,isDownload:!0})},disable:!0},"Text (Speakers & Timecodes)"),r.a.createElement(C.a.Item,{onClick:function(){Ot({type:"text",ext:"txt",speakers:!0,timecodes:!0,atlasFormat:!0,isDownload:!0})},disable:!0},"Text (Atlas format)"),r.a.createElement(C.a.Divider,null),r.a.createElement(C.a.Item,{onClick:function(){Ot({type:"word",ext:"docx",speakers:!1,timecodes:!1,isDownload:!0})}},"Word (",r.a.createElement("code",null,".docx"),")"),r.a.createElement(C.a.Item,{onClick:function(){Ot({type:"word",ext:"docx",speakers:!0,timecodes:!1,isDownload:!0})}},"Word (Speakers)"),r.a.createElement(C.a.Item,{onClick:function(){Ot({type:"word",ext:"docx",speakers:!1,timecodes:!0,isDownload:!0})}},"Word (Timecodes)"),r.a.createElement(C.a.Item,{onClick:function(){Ot({type:"word",ext:"docx",speakers:!0,timecodes:!0,isDownload:!0})}},"Word (Speakers & Timecodes)"),r.a.createElement(C.a.Item,{onClick:function(){Ot({type:"word",ext:"docx",speakers:!1,timecodes:!1,inlineTimecodes:!0,hideTitle:!0})}},"Word (OHMS)"),r.a.createElement(C.a.Divider,null),r.a.createElement(C.a.Item,{style:{color:"black"},disabled:!0},r.a.createElement("b",null,"Closed Captions Export")),se.map((function(e,t){var a=e.type,n=e.label,i=e.ext;return r.a.createElement(C.a.Item,{key:t+n,onClick:function(){Ot({type:a,ext:i,isDownload:!0})}},n," (",r.a.createElement("code",null,".",i),")")})))))),r.a.createElement(D.a,{xs:3,sm:3,md:3,lg:2,xl:1,className:"p-1",style:{marginLeft:"21px"}},r.a.createElement(M.a,{OverlayTrigger:!0,delay:2e3,placement:"bottom",overlay:r.a.createElement(L.a,{id:"tooltip-disabled"},"Save")},r.a.createElement(S.a,{disabled:Se,onClick:Ct,variant:"light",className:"fs-17"},r.a.createElement(z.a,{icon:K.d})))),r.a.createElement(D.a,{xs:3,sm:3,md:3,lg:2,xl:1,className:"p-1",style:{marginLeft:"10px"}},r.a.createElement(M.a,{delay:1e3,placement:"bottom",overlay:r.a.createElement(L.a,{id:"tooltip-disabled"},"Turn ",ke?"off":"on"," pause while typing functionality. As you start typing the media while pause playback until you stop. Not reccomended on longer transcript as it might present performance issues.")},r.a.createElement(S.a,{disabled:Se,onClick:function(){Ee(!ke)},variant:ke?"secondary":"light",className:"fs-17"},r.a.createElement(z.a,{icon:K.c}))))),r.a.createElement(R.a,{className:"flex-grow-1 align-items-end"},r.a.createElement(D.a,{className:"p-0 d-flex flex-column"},r.a.createElement("div",{className:"metadata-editor-container"},r.a.createElement(I.a,{defaultActiveKey:"description",id:"tabs"},r.a.createElement(F.a,{eventKey:"description",title:"Description"},r.a.createElement(A.a,{className:"pt-3 flex-grow-1"},r.a.createElement(A.a.Group,{controlId:"descriptionField"},r.a.createElement(A.a.Label,null,"Description"),r.a.createElement(A.a.Control,{as:"textarea",rows:3,value:Be,onChange:function(e){return We(e.target.value)},style:{resize:"none"}})),r.a.createElement(A.a.Group,{controlId:"languageDropdown"},r.a.createElement(A.a.Label,null,"Language"),r.a.createElement(A.a.Control,{as:"select",value:Ve,onChange:function(e){return Xe(e.target.value)}},Object.keys(Ye).map((function(e){return r.a.createElement("option",{key:e,value:e},Ye[e])})))),r.a.createElement(A.a.Group,{controlId:"publicDropdown"},r.a.createElement(A.a.Label,null,"Public"),r.a.createElement(A.a.Control,{as:"select",value:at,onChange:function(e){return nt(e.target.value)}},r.a.createElement("option",{value:"true"},"Yes"),r.a.createElement("option",{value:"false"},"No"))),r.a.createElement(A.a.Group,{controlId:"captionCheckbox",className:"custom-checkbox"},r.a.createElement(A.a.Check,{type:"checkbox",label:"Is Caption?",checked:ot,onChange:function(e){return st(e.target.checked)},className:"custom-checkbox-input"})),r.a.createElement(A.a.Group,{controlId:"downloadableCheckbox",className:"custom-checkbox"},r.a.createElement(A.a.Check,{type:"checkbox",label:"Is Downloadable?",checked:ut,onChange:function(e){return dt(e.target.checked)},className:"custom-checkbox-input"})),r.a.createElement("div",{className:"d-flex align-items-end justify-content-end"},r.a.createElement(S.a,{variant:"primary",onClick:function(){e.saveMetadata({description:Be,language:Ve,isDownloadable:ut,isCaption:ot,isPublic:at})},className:"btn-update-description mt-10-vh"},"Update Description")))),r.a.createElement(F.a,{eventKey:"annotations",title:"Annotations"},r.a.createElement("p",null,"Coming soon..."))))))),r.a.createElement(D.a,{xs:{span:12,order:3},sm:"audio"===mt()?{span:10,order:2,offset:1}:{span:9,order:2},md:"audio"===mt()?{span:10,order:2,offset:1}:{span:9,order:2},lg:"audio"===mt()?{span:8,order:2,offset:2}:{span:9,order:2},xl:"audio"===mt()?{span:8,order:2,offset:2}:{span:9,order:2}},0!==H.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"editor-wrapper-container"},r.a.createElement(P.c,{editor:B,value:H,onChange:function(e){return Y(e)}},r.a.createElement(P.a,{readOnly:"boolean"===typeof e.isEditable&&!e.isEditable,renderElement:ht,renderLeaf:function(e){var t=e.attributes,a=e.children,n=e.leaf;return r.a.createElement("span",Object.assign({},t,{onDoubleClick:jt},n.highlight&&{"data-cy":"search-highlighted"},{className:Object(j.a)(Qe(),n.bold&&"bold",n.highlight&&"#ffeeba"),"data-start":a.props.parent.start,"data-previous-timings":a.props.parent.previousTimings,title:a.props.parent.start}),a)},onKeyDown:function(t){if(De(!0),ke){e.mediaRef&&e.mediaRef.current?e.mediaRef.current.pause():u&&u.current&&u.current.pauseVideo(),null!==ge&&clearTimeout(ge);var a=setTimeout((function(){e.mediaRef&&e.mediaRef.current?e.mediaRef.current.play():u&&u.current&&u.current.playVideo()}),1500);ye(a)}},onKeyUp:function(e){13===e.keyCode&&function(){for(var e=U.a.range(B,[]),t=B.children,a=function(a){if(t[a-1]&&"timedText"===t[a].type&&t[a].start===t[a-1].start&&t[a].startTimecode===t[a-1].startTimecode){var n,r=(t[a-1].children[0].text+t[a].children[0].text).split(" ").length,i=(((null===(n=t[a+1])||void 0===n?void 0:n.start)||t[a].start+.5*t[a].children[0].text.split(" ").length)-t[a].start)/r,o=t[a].start+i*t[a].children[0].text.split(" ").length,s=V(o);U.h.setNodes(B,{type:"timedText",start:o,startTimecode:s},{at:e,match:function(e){return"timedText"===e.type&&e.start===t[a].start&&e.startTimecode===t[a].startTimecode&&e.children[0].text===t[a].children[0].text}})}},n=0;n<t.length;n++)a(n)}()},decorate:vt})))):r.a.createElement("section",{className:"text-center"},r.a.createElement("i",{className:"text-center"},"Loading...")))))}tt.defaultProps={showTitle:!1,showTimecodes:!0,showSpeakers:!0,mediaType:"digitalpaperedit",isEditable:!0};var at=t.default=tt;o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[121,1,2]]]);
//# sourceMappingURL=main.403bdeb1.chunk.js.map