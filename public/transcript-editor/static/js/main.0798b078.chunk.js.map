{"version":3,"sources":["App.js","serviceWorker.js","util/timecode-converter/src/secondsToTimecode.js","util/timecode-converter/src/timecodeToSeconds.js","util/timecode-converter/src/padTimeToTimecode.js","util/timecode-converter/index.js","util/downlaod/index.js","util/ibmwatson-to-dpe/index.js","util/dpe-to-slate/index.js","util/vtt-to-dpe/index.js","util/txt-to-dpe/index.js","util/inline-interval-timecodes/index.js","util/pluk/index.js","util/export-adapters/subtitles-generator/list.js","util/count-words/index.js","util/export-adapters/txt/index.js","util/export-adapters/slate-to-dpe/update-timestamps/update-timestamps-helper.js","util/export-adapters/slate-to-dpe/update-timestamps/index.js","util/export-adapters/slate-to-dpe/index.js","util/export-adapters/docx/index.js","util/export-adapters/subtitles-generator/compose-subtitles/util/format-seconds.js","util/export-adapters/subtitles-generator/presegment-text/text-segmentation/index.js","util/export-adapters/subtitles-generator/presegment-text/line-break-between-sentences/index.js","util/export-adapters/subtitles-generator/presegment-text/util/remove-space-after-carriage-return.js","util/export-adapters/subtitles-generator/presegment-text/fold/index.js","util/export-adapters/subtitles-generator/presegment-text/util/remove-space-at-beginning-of-line.js","util/export-adapters/subtitles-generator/presegment-text/divide-into-two-lines/index.js","util/export-adapters/subtitles-generator/presegment-text/index.js","util/export-adapters/subtitles-generator/compose-subtitles/util/escape-text.js","util/export-adapters/subtitles-generator/compose-subtitles/premiere.js","util/export-adapters/subtitles-generator/compose-subtitles/util/tc-format.js","util/export-adapters/subtitles-generator/compose-subtitles/itt.js","util/export-adapters/subtitles-generator/compose-subtitles/ttml.js","util/export-adapters/subtitles-generator/compose-subtitles/srt.js","util/export-adapters/subtitles-generator/compose-subtitles/vtt.js","util/export-adapters/subtitles-generator/compose-subtitles/csv.js","util/export-adapters/subtitles-generator/index.js","util/export-adapters/index.js","util/is-empty/index.js","util/dpe-to-slate/generate-previous-timings-up-to-current/index.js","util/languages.js","components/media-component.js","components/index.js","index.js"],"names":["App","props","handleBeforeUnload","event","state","isTranscriptDataSaved","preventDefault","returnValue","loadTranscript","params","fetch","atob","transcript","then","res","json","result","url","media_url","env","host","data","sst_type","JSON","parse","setState","transcriptData","mediaUrl","title","sttType","isLoaded","aviaryUrl","resourceTitle","resource_title","metadata","error","save","value","saveTranscript","saveAndClose","saveTranscriptTitle","newTitle","saveMetadata","a","formEdit","file_transcript","is_edit","is_caption","isCaption","is_public","isPublic","is_downloadable","isDownloadable","description","language","requestOptions","method","headers","body","stringify","response","NotificationManager","success","close","slatejs","speakers","compressedData","pako","gzip","to","_result","window","cancelEditRequest","confirm","handleSetTranscriptDataSaved","isTextEditable","spellCheck","analyticsEvents","fileName","autoSaveData","autoSaveContentType","autoSaveExtension","editorRef","React","createRef","bind","queryString","location","search","localStorage","setItem","this","document","addEventListener","onbeforeunload","undefined","removeEventListener","className","handleSaveEditor","handleSaveAndClose","handleSaveTranscriptTitle","isEditable","showTitle","mediaRef","setTranscriptDataSaved","Component","Boolean","hostname","match","secondsToTimecode","seconds","framePerSeconds","fps","normalisedSeconds","Number","Math","floor","toPrecision","toFixed","normalisePlayerTime","wholeSeconds","frames","_padZero","n","parseInt","timecodeToSecondsHelper","tc","s","split","timecodeToFrames","isOneDigit","str","length","padTimeToTimecode","time","timecode","includes","includesFullStop","replace","timecodeToSeconds","resultPadded","parseFloat","shortTimecode","slice","download","content","filename","contentType","type","link","createElement","blob","Blob","href","URL","createObjectURL","appendChild","click","removeChild","searchSpeakerLabelsByToAndFromPair","array","from","Array","isArray","TypeError","filter","obj","get2DWordsList","speakerLabels","map","alternatives","alt","timestamps","timestamp","IBMWord","text","start","end","speaker","normalizeWord","convertIBMWatsonToDpe","results","results_array","speaker_labels","wordList2d","flat","paragraphs","transcripts","forEach","index","push","normalizeParagraph","getParagraphs","words","generateText","paragraph","word","w","join","generateTotalTimings","keys","generatePreviousTimingsUpToCurrentOne","totalTimingsInt","splice","convertDpeToSlate","Object","previousTimings","startTimecode","children","DPETranscript","webvtt","lines","dpeTranscription","convertTimeToSeconds","hours","minutes","line","timeMatch","startTime","endTime","speakerMatch","speakerRegex","nextLine","speakerLine","contentStarted","i","currentLine","trim","wordsArray","wordDuration","wordIndex","convertVttToDpe","Error","textTranscript","timeCodeMatch","timeCode","skip","timecodeRegex","test","generatedEndTime","endTimeMatch","endTimeCode","matchedEndTime","convertTxtToDpe","insertTimecodesInline","intervalSeconds","lastInsertTime","sortedWords","sort","b","newWords","pluck","key","Set","subtitlesExportOptionsList","label","ext","countWords","slateToText","timecodes","atlasFormat","Node","string","toUpperCase","updateTimestampsHelper","currentContent","currentText","alignSTT","updateTimestamps","newEntities","updatedBlockArray","totalWords","blockIndex","block","wordsInBlock","blockEntites","updatedBlock","createSlateContentFromSlateJsParagraphs","converSlateToDpe","alignedWords","createDpeParagraphsFromSlateJs","slateToDocx","inlineTimecodes","hideTitle","creator","doc","Document","textTitle","TextRun","paragraphTitle","Paragraph","addRun","heading1","center","addParagraph","paragraphEmpty","slateParagraph","paragraphSpeakerTimecodes","timecodeStartTime","bold","tab","paragraphContents","textBreak","break","paragraphText","Packer","toBlob","formatSeconds","Date","toISOString","substr","textSegmentation","honorifics","optionalHonorifics","options","newline_boundaries","html_boundaries","sanitize","allowed_tags","abbreviations","tokenizer","sentences","addLineBreakBetweenSentences","removeSpaceAfterCarriageReturn","foldWords","foldNumber","textArray","counter","list","nextElementLength","foldWordsReturnArray","r","removeSpaceAtBeginningOfLine","divideIntoTwoLines","l","getTextFromWordsList","preSegmentText","textInput","tmpNumberOfCharPerLine","segmentedText","textWithLineBreakBetweenSentences","foldedText","textDividedIntoTwoLines","AMP_REGEX","LT_REGEX","GT_REGEX","escapeText","ttmlGeneratorPremiere","vttJSON","ttmlOut","v","tcFormat","FPS","TC","round","toString","ittGenerator","lang","ittOut","ttmlGenerator","srtGenerator","srtOut","vttGenerator","vttOut","csvGenerator","srtJsonContent","srtLineO","segmentedTextToList","addTimecodesToLines","wordsList","startWordCounter","endWordCounter","jsonLine","possibleParagraphs","p","pctInParagraph","min","segmentTextByParagraph","wordList","p_id","sorted_paragraphs","foundParagraph","id","subtitlesComposer","numberOfCharPerLine","subtitlesJson","paragraphMode","segmentedTextArray","preSegmentTextJson","captionTypeList","exportAdapter","slateValue","transcriptTitle","dpeTranscriptData","isCaptionType","editorContent","subtitlesGenerator","console","isEmpty","generatePreviousTimingsUpToCurrent","currentTime","transcriptDataSlateValue","lastWordStartTime","lastWordStartTimeInt","emptyListOfTimes","languagesArray","extractVideoId","videoIdMatch","MediaComponent","playerRef","useRef","isYouTube","videoId","opts","playerVars","autoplay","fs","loop","showinfo","modestbranding","playsinline","enablejsapi","onReady","current","target","setPlayer","iframeClassName","ref","src","width","height","controls","playsInline","PLAYBACK_RATE_VALUES","SlateTranscriptEditor","useState","player","setCurrentTime","setDuration","playbackRate","setPlaybackRate","editor","useMemo","withReact","withHistory","createEditor","setValue","defaultShowSpeakersPreference","showSpeakers","defaultShowTimecodesPreference","showTimecodes","setShowSpeakers","setSpeakerOptions","showSpeakersCheatShet","saveTimer","setSaveTimer","isPauseWhiletyping","setIsPauseWhiletyping","isProcessing","setIsProcessing","isContentModified","setIsContentIsModified","findContent","setFindContent","replaceContent","setReplaceContent","setDescription","setLanguage","setIsPublic","setIsCaption","setIsDownloadable","totalHits","setTotalHits","currentHighlighted","setCurrentHighlighted","useEffect","style","cursor","transcriptDataLive","nodes","selection","positionLastNode","Transforms","insertNodes","at","uniqueSpeakers","getUniqueSpeakers","handleTimeUpdated","duration","getFileTitle","path","basename","getMediaType","clipExt","extname","tmpMediaType","mediaType","e","renderElement","useCallback","element","TimedTextElement","DefaultElement","decorate","node","ranges","Text","isText","parts","offset","part","anchor","focus","highlight","timeoutId","setTimeout","totalHitsSpan","getElementById","highlightedSpans","querySelectorAll","classList","add","scrollIntoView","behavior","remove","innerHTML","clearTimeout","handleSetSpeakerName","pathToCurrentNode","ReactEditor","findPath","oldSpeakerName","createAccessibleDialog","newSpeakerName","message","toLowerCase","shouldUpdateAllSpeakerInstances","rangeForTheWholeEditor","Editor","range","setNodes","maxSpeakerLength","findLongestSpeakerNameLength","minWidth","defaultValue","displayInput","isReplaceDialog","Promise","resolve","dialogContainer","setAttribute","messageElement","textContent","inputField","dataList","autocompleteSuggestions","suggestion","option","oneButton","resolution","okButton","cancelButton","handleTimeCodeEdit","oldTimeCode","newTimeCode","isValidTimeCode","isTimeCodeBetweenRange","alert","prevNodeTimeCode","nextNodeTimeCode","convertedNewTimeCode","isNaN","handleTimeCodeSync","getCurrentTime","Row","attributes","textAlign","dir","Col","contentEditable","onClick","handleTimedTextClick","data-start","OverlayTrigger","delay","placement","overlay","Tooltip","icon","faEdit","onKeyDown","handleTimeCodeEditKeyPress","pull","tabIndex","role","aria-label","faSync","overflow","textOverflow","whiteSpace","maxWidth","textTransform","fontStyle","handleSetSpeakerNameKeyPress","maxLength","speakerObj","contains","dataset","seekTo","play","slateString","parentNode","handleRestoreTimecodes","alignedSlateData","handleExport","isDownload","tmpValue","editorContnet","handleSave","format","Container","fluid","backgroundColor","paddingTop","scoped","onKeyUp","keyCode","select","onBlur","keycode","Form","xs","sm","md","lg","xl","Group","controlId","Control","as","placeholder","onChange","faAngleDown","nextIndex","size","faAngleUp","prevIndex","Button","variant","occurrencesList","child","currentIndex","childIndex","traversedCount","occurrenceCount","t","regex","RegExp","newText","newChild","removeNodes","replaceAll","span","order","playerObject","marginRight","tmpNewPlaybackRateValue","playbackRateValue","faUndo","marginLeft","DropdownButton","disabled","faFileDownload","Dropdown","Item","color","disable","Divider","faSave","faPause","Tabs","defaultActiveKey","Tab","eventKey","Label","rows","resize","code","Check","checked","readOnly","renderLeaf","leaf","onDoubleClick","css","parent","data-previous-timings","pause","pauseVideo","tmpSaveTimer","playVideo","wordLength","newStart","newTimecode","defaultProps","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.0798b078.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport queryString from \"query-string\";\nimport \"react-notifications/lib/notifications.css\";\nimport {\n  NotificationContainer,\n  NotificationManager,\n} from \"react-notifications\";\nimport SlateTranscriptEditor from './index.js';\nimport 'bootstrap-css-only';\nimport pako from 'pako';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transcriptData: null,\n      mediaUrl: null,\n      isTextEditable: true,\n      spellCheck: true,\n      sttType: null,\n      analyticsEvents: [],\n      title: \"\",\n      resourceTitle: \"\",\n      fileName: \"\",\n      autoSaveData: {},\n      autoSaveContentType: \"slate\",\n      autoSaveExtension: \"json\",\n      isLoaded: false,\n      error: false,\n      aviaryUrl: \"\",\n      formEdit: false,\n      metadata: {},\n      isTranscriptDataSaved: true,\n    };\n\n    this.editorRef = React.createRef();\n    this.cancelEditRequest = this.cancelEditRequest.bind(this);\n    this.loadTranscript = this.loadTranscript.bind(this);\n    this.save = this.save.bind(this);\n  }\n\n  componentDidMount() {\n    const params = queryString.parse(window.location.search);\n    localStorage.setItem(\"transcript_finish\", false);\n\n    if (typeof params.transcript != \"undefined\") {\n      this.loadTranscript(params);\n    } else {\n      this.setState({\n        isLoaded: true,\n        error: true,\n      });\n    }\n\n    document.addEventListener(\"contextmenu\", (event) => event.preventDefault());\n\n    window.addEventListener(\"unload\", async function (event) {\n      localStorage.setItem(\"transcript_finish\", true);\n    });\n\n    window.addEventListener(\"beforeunload\", this.handleBeforeUnload);\n  }\n\n  componentDidUpdate() {\n    if (this.state.formEdit) {\n      window.onbeforeunload = () => true;\n    } else {\n      window.onbeforeunload = undefined;\n    }\n  }\n\n  componentWillUnmount() {\n    // Remove beforeunload event listener to prevent memory leaks\n    window.removeEventListener(\"beforeunload\", this.handleBeforeUnload);\n  }\n\n  handleBeforeUnload = (event) => {\n    const { isTranscriptDataSaved } = this.state;\n    if (!isTranscriptDataSaved) {\n        event.preventDefault();\n        event.returnValue = ''; // This is needed for some browsers\n        return ''; // This message will be shown as a confirmation dialog\n    }\n  };\n\n  loadTranscript = (params) => {\n    try {\n      fetch(atob(params.transcript))\n        .then((res) => res.json())\n        .then(\n          (result) => {\n            let url = result.media_url;\n            if (!result.env) {\n              url = result.host + result.media_url;\n            }\n            let data = result.transcript;\n            if (result.sst_type === 'ibm' || result.sst_type === 'slatejs') {\n              data = JSON.parse(data);\n            } \n            this.setState({\n              transcriptData: data,\n              mediaUrl: url,\n              title: result.title,\n              sttType: result.sst_type,\n              isLoaded: true,\n              aviaryUrl: atob(params.transcript),\n              resourceTitle: result.resource_title,\n              metadata: result.metadata,\n            });\n          },\n          (error) => {\n            this.setState({\n              isLoaded: true,\n              error: true,\n            });\n          }\n        );\n    } catch (error) {\n      this.setState({\n        isLoaded: true,\n        error: true,\n      });\n    }\n  };\n  save = (value, metadata) => {\n    this.saveTranscript(value, false, metadata);\n  };\n\n  saveAndClose = (value, metadata) => {\n    this.saveTranscript(value, true, metadata);\n  };\n\n  saveTranscriptTitle = (newTitle) => {\n    this.setState({\n      title: newTitle\n    });\n  };\n\n  saveMetadata = async (metadata) => {\n    this.setState({\n      formEdit: false,\n    });\n\n    let transcript = {\n      file_transcript: {\n        is_edit: false,\n        is_caption: metadata.isCaption,\n        is_public: metadata.isPublic,\n        is_downloadable: metadata.isDownloadable,\n        description: metadata.description,\n        language: metadata.language,\n      },\n    };\n\n    const requestOptions = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(transcript),\n    };\n\n    await fetch(this.state.aviaryUrl + \".json\", requestOptions)\n      .then((response) => response.json())\n      .then((result) => {\n        NotificationManager.success(\"\", \"Transcript Metadata saved successfully.\", 3000);\n      });\n  };\n\n  saveTranscript = async (value, close=false, metadata) => {\n    this.setState({\n      formEdit: false,\n      isTranscriptDataSaved: true,\n    });\n\n    const currentContent = value;\n\n    let transcript = {\n      file_transcript: {\n        slatejs: currentContent,\n        is_edit: false,\n        title: this.state.title,\n        is_caption: metadata.isCaption,\n        is_public: metadata.isPublic,\n        is_downloadable: metadata.isDownloadable,\n        description: metadata.description,\n        language: metadata.language,\n      },\n      speakers: ['allison', 'watson'],\n    };\n\n    // Convert and compress the transcript\n    const compressedData = pako.gzip(JSON.stringify(transcript), { to: 'string' });\n\n    const requestOptions = {\n      method: \"POST\",\n      headers: { \"Content-Encoding\": \"gzip\" },\n      body: compressedData,\n    };\n\n    await fetch(this.state.aviaryUrl + \".json\", requestOptions)\n      .then((response) => response.json())\n      .then((_result) => {\n        NotificationManager.success(\"\", \"Transcript saved successfully.\", 3000);\n        if (close){\n          window.close();\n        }\n      });\n  };\n\n  cancelEditRequest = async () => {\n    let r = false;\n    if (this.state.formEdit) {\n      r = window.confirm(\n        \"Changes that you made may not be saved. Are you sure you want to cancel?\"\n      );\n    } else {\n      r = true;\n    }\n\n    if (r === true) {\n      this.setState({\n        formEdit: false,\n      });\n      let transcript = {\n        file_transcript: {\n          is_edit: false,\n        },\n      };\n      const requestOptions = {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(transcript),\n      };\n      await fetch(this.state.aviaryUrl + \".json\", requestOptions)\n        .then((response) => response.json())\n        .then((result) => {\n          window.close();\n        });\n    }\n  };\n\n  handleSetTranscriptDataSaved = (value) => {\n    this.setState({\n      isTranscriptDataSaved: value,\n    });\n  };\n\n  render() {\n    if (this.state.isLoaded && !this.state.error) {\n      return (\n        <div className=\"App\">\n          <section className=\"ml-lg-3\">\n            <SlateTranscriptEditor\n              mediaUrl={this.state.mediaUrl}\n              transcriptData={this.state.transcriptData}\n              handleSaveEditor={this.save}\n              handleSaveAndClose={this.saveAndClose}\n              handleSaveTranscriptTitle={this.saveTranscriptTitle}\n              isEditable={this.state.isTextEditable}\n              title={this.state.title}\n              resourceTitle={this.state.resourceTitle}\n              autoSaveContentType='slate'\n              showTitle={true}\n              mediaRef={this.editorRef}\n              sttType={this.state.sttType}\n              metadata={this.state.metadata}\n              saveMetadata={this.saveMetadata}\n              isTranscriptDataSaved={this.state.isTranscriptDataSaved}\n              setTranscriptDataSaved={this.handleSetTranscriptDataSaved}\n            />\n          </section>\n          <NotificationContainer />\n        </div>\n      );\n    } else if (!this.state.isLoaded) {\n      return (\n        <div className=\"loader-container\">\n          <div className=\"loader\"></div>\n          <span className=\"loader-text\">Please wait while the transcript is being loaded...</span>\n        </div>\n      );\n    } else {\n      return (\n        <div> Transcript does not exist or you don't have the permission to access it. </div>\n      );\n    }\n  }\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","/**\n * Raised in this comment https://github.com/bbc/react-transcript-editor/pull/9\n * abstracted from https://github.com/bbc/newslabs-cdn/blob/master/js/20-bbcnpf.utils.js\n * In broadcast VIDEO, timecode is NOT hh:mm:ss:ms, it's hh:mm:ss:ff where ff is frames,\n * dependent on the framerate of the media concerned.\n * `hh:mm:ss:ff`\n */\n\n/**\n * Helper function\n * Rounds to the 14milliseconds boundaries\n * Time in video can only \"exist in\" 14milliseconds boundaries.\n * This makes it possible for the HTML5 player to be frame accurate.\n * @param {*} seconds\n * @param {*} fps\n */\nconst normalisePlayerTime = function(seconds, fps) {\n  return Number(((1.0 / fps) * Math.floor(Number((fps * seconds).toPrecision(12)))).toFixed(2));\n};\n\n/*\n * @param {*} seconds\n * @param {*} fps\n */\nconst secondsToTimecode = function(seconds, framePerSeconds) {\n  // handle edge case, trying to convert zero seconds\n  if (seconds === 0) {\n    return '00:00:00:00';\n  }\n  // written for PAL non-drop timecode\n  let fps = 25;\n  if (framePerSeconds !== undefined) {\n    fps = framePerSeconds;\n  }\n\n  const normalisedSeconds = normalisePlayerTime(seconds, fps);\n\n  const wholeSeconds = Math.floor(normalisedSeconds);\n  const frames = ((normalisedSeconds - wholeSeconds) * fps).toFixed(2);\n\n  // prepends zero - example pads 3 to 03\n  function _padZero(n) {\n    if (n < 10) return `0${parseInt(n)}`;\n\n    return parseInt(n);\n  }\n\n  return `${_padZero((wholeSeconds / 60 / 60) % 60)}:${_padZero((wholeSeconds / 60) % 60)}:${_padZero(wholeSeconds % 60)}:${_padZero(frames)}`;\n};\n\nexport default secondsToTimecode;\n","/**\n * Helperf unction\n * @param {*} tc\n * @param {*} fps\n */\nconst timecodeToFrames = function(tc, fps) {\n  // TODO make 29.97 fps drop-frame aware - works for 25 only.\n\n  const s = tc.split(':');\n  let frames = parseInt(s[3]);\n  frames += parseInt(s[2]) * fps;\n  frames += parseInt(s[1]) * (fps * 60);\n  frames += parseInt(s[0]) * (fps * 60 * 60);\n\n  return frames;\n};\n\n/**\n * Convert broadcast timecodes to seconds\n * @param {*} tc - `hh:mm:ss:ff`\n * @param {*} framePerSeconds - defaults to 25 if not provided\n */\nconst timecodeToSecondsHelper = function(tc, framePerSeconds) {\n  let fps = 25;\n  if (framePerSeconds !== undefined) {\n    fps = framePerSeconds;\n  }\n  const frames = timecodeToFrames(tc, fps);\n\n  return Number(Number(frames / fps).toFixed(2));\n};\n\nexport default timecodeToSecondsHelper;\n","const countColon = timecode => timecode.split(':').length;\n\nconst includesFullStop = timecode => timecode.includes('.');\n\nconst isOneDigit = str => str.length === 1;\n\nconst padTimeToTimecode = time => {\n  if (typeof time === 'string') {\n    switch (countColon(time)) {\n      case 4:\n        // is already in timecode format\n        // hh:mm:ss:ff\n        return time;\n      case 2:\n        // m:ss\n        if (isOneDigit(time.split(':')[0])) {\n          return `00:0${time}:00`;\n        }\n\n        return `00:${time}:00`;\n      case 3:\n        // hh:mm:ss\n        return `${time}:00`;\n      default:\n        // mm.ss\n        if (includesFullStop(time)) {\n          // m.ss\n          if (isOneDigit(time.split('.')[0])) {\n            return `00:0${time.split('.')[0]}:${time.split('.')[1]}:00`;\n          }\n\n          return `00:${time.replace('.', ':')}:00`;\n        }\n\n        // if just int, then it's seconds\n        // s\n        if (isOneDigit(time)) {\n          return `00:00:0${time}:00`;\n        }\n\n        return `00:00:${time}:00`;\n    }\n    // edge case if it's number return a number coz cannot refactor\n    // TODO: might need to refactor and move this elsewhere\n  } else {\n    return time;\n  }\n};\n\nexport default padTimeToTimecode;\n","/**\n * Wrapping around \"time stamps\" and timecode conversion modules\n * To provide more support for variety of formats.\n */\nimport secondsToTimecode from './src/secondsToTimecode';\nimport timecodeToSecondsHelper from './src/timecodeToSeconds';\nimport padTimeToTimecode from './src/padTimeToTimecode';\n\n/**\n * @param {*} time\n * Can take as input timecodes in the following formats\n * - hh:mm:ss:ff\n * - mm:ss\n * - m:ss\n * - ss - seconds --> if it's already in seconds then it just returns seconds\n * - hh:mm:ff\n * @todo could be refactored with some helper functions for clarity\n */\nconst timecodeToSeconds = time => {\n  if (typeof time === 'string') {\n    const resultPadded = padTimeToTimecode(time);\n    const resultConverted = timecodeToSecondsHelper(resultPadded);\n\n    return resultConverted;\n  }\n\n  // assuming it receive timecode as seconds as string '600'\n  return parseFloat(time);\n};\n\nconst shortTimecode = time => {\n  // handle edge case if it's zero, then just return shorter timecode\n  if (time === 0) {\n    return '00:00:00';\n  } else {\n    const timecode = secondsToTimecode(time);\n    return timecode.slice(0, -3);\n  }\n};\n\nexport { secondsToTimecode, timecodeToSeconds, shortTimecode };\n","// https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file\nconst download = (content, filename, contentType) => {\n  const type = contentType || 'application/octet-stream';\n  const link = document.createElement('a');\n  const blob = new Blob([content], { type: type });\n\n  link.href = window.URL.createObjectURL(blob);\n  link.download = filename;\n  // Firefox fix - cannot do link.click() if it's not attached to DOM in firefox\n  // https://stackoverflow.com/questions/32225904/programmatical-click-on-a-tag-not-working-in-firefox\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n};\n\nexport default download;\n","/**\n * This file provides functions to convert IBM Watson transcript data into a standardized format.\n * It processes the transcript data, extracts and organizes words and paragraphs, and associates\n * speakers with their respective spoken words.\n */\n\n/**\n * Searches for a matching speaker label based on the 'from' and 'to' timestamps.\n *\n * @param {Object[]} array - The array of speaker labels.\n * @param {number} from - The starting timestamp to match.\n * @param {number} to - The ending timestamp to match.\n * @returns {Object} - The matching speaker label object.\n */\nfunction searchSpeakerLabelsByToAndFromPair(array, from, to) {\n  if (!Array.isArray(array)) {\n    throw new TypeError('The first argument must be an array.');\n  }\n\n  return array.filter(obj => obj['to'] === to && obj['from'] === from)[0];\n}\n\n/**\n * Normalizes a word entry from IBM Watson transcript data.\n *\n * @param {Array} IBMWord - An array representing a word [text, start, end].\n * @param {Object[]} speakerLabels - An array of speaker labels.\n * @returns {Object} - A normalized word object.\n */\nfunction normalizeWord(IBMWord, speakerLabels) {\n  if (!Array.isArray(IBMWord) || IBMWord.length < 3) {\n    throw new TypeError('Expected IBMWord to be an array with at least three elements');\n  }\n\n  const [text, start, end] = IBMWord;\n  const speaker = speakerLabels\n      ? searchSpeakerLabelsByToAndFromPair(speakerLabels, start, end)['speaker']\n      : null;\n\n  return { start, end, text, speaker };\n}\n\n/**\n * Converts a result entry into a 2D list of normalized words.\n *\n * @param {Object} result - A result entry from IBM Watson transcript data.\n * @param {Object[]} speakerLabels - An array of speaker labels.\n * @returns {Array} - A 2D list of normalized words.\n */\nfunction get2DWordsList(result, speakerLabels) {\n  if (!Array.isArray(result)) {\n    throw new TypeError('Expected result to be an array');\n  }\n  return result.map(({ alternatives }) => (\n      alternatives.map(alt => (\n          alt.timestamps.map(timestamp => (\n              normalizeWord(timestamp, speakerLabels)\n          ))\n      ))\n  ));\n}\n\n/**\n * Organizes a 2D list of words into paragraphs.\n *\n * @param {Array} wordList2d - A 2D list of words.\n * @returns {Object[]} - An array of paragraph objects.\n */\nfunction getParagraphs(transcripts) {\n  if (!Array.isArray(transcripts) || transcripts.length === 0) {\n    return [];\n  }\n\n  const results = [];\n\n  transcripts.forEach((transcript) => {\n    let from = transcript['alternatives'][0]['timestamps'][0][1];\n    let to = transcript['alternatives'][0]['timestamps'][transcript['alternatives'][0]['timestamps'].length - 1][2];\n    results.push({start: from, end: to, speaker: 'Add speaker'});\n  });\n\n  return results;\n}\n\n/**\n * Normalizes paragraphs from IBM Watson speaker labels.\n *\n * @param {Object[]} IBMparagraphs - An array of speaker labels.\n * @returns {Object[]} - An array of normalized paragraph objects.\n */\nfunction normalizeParagraph(transcripts, speakerLabels) {\n  if (!Array.isArray(transcripts) || transcripts.length === 0) {\n    return [];\n  }\n\n  const results = [];\n\n  transcripts.forEach((transcript, index) => {\n    let from = transcript['alternatives'][0]['timestamps'][0][1];\n    let to = transcript['alternatives'][0]['timestamps'][transcript['alternatives'][0]['timestamps'].length - 1][2];\n    let speaker = searchSpeakerLabelsByToAndFromPair(speakerLabels, from, transcript['alternatives'][0]['timestamps'][0][2])['speaker'];\n    results.push({start: from, end: to, speaker: speaker});\n  });\n\n  return results;\n}\n\n/**\n * Converts IBM Watson transcript data to a standardized format.\n *\n * @param {Object} transcript - The IBM Watson transcript data.\n * @returns {Object} - An object containing an array of paragraphs and an array of words.\n */\nfunction convertIBMWatsonToDpe(transcript) {\n  const { results } = transcript;\n  const results_array = results[0].results || results\n  let speakerLabels = transcript.speaker_labels || transcript.results[0].speaker_labels\n  speakerLabels = speakerLabels && speakerLabels.length > 0 ? speakerLabels : null;\n  let wordList2d = get2DWordsList(results_array, speakerLabels);\n  if (Array.isArray(wordList2d[0][0])) {\n    wordList2d = wordList2d.flat()\n  }\n  let paragraphs = [];\n  if (speakerLabels) {\n    paragraphs = normalizeParagraph(results_array, speakerLabels);\n  } else {\n    paragraphs = getParagraphs(results_array);\n  }\n\n  return {\n    paragraphs: paragraphs.flat(),\n    words: wordList2d.flat().flat(),\n  };\n}\n\nexport { convertIBMWatsonToDpe };\n","import { shortTimecode } from '../timecode-converter/index';\nimport { convertIBMWatsonToDpe } from '../ibmwatson-to-dpe/index'\nimport { convertVttToDpe } from '../vtt-to-dpe/index'\nimport { convertTxtToDpe } from '../txt-to-dpe/index'\n\n/**\n *\n * `generatePreviousTimings` and `generatePreviousTimingsUpToCurrent`\n * are used to add a `previousTimings` data attribute\n * to the paragraph `TimedTextElement` in `renderElement`\n * This makes it possible to do css injection to hilight current timings\n * `.timecode[data-previous-timings*=\"${listOfPreviousTimingsUpToCurrentOne}\"]\n *\n * where `listOfPreviousTimingsUpToCurrentOne` is dinamically generated up to the current one.\n * eg if current time is `3` then `listOfPreviousTimingsUpToCurrentOne` \"0 1 2\"\n */\n\n//  TODO: should it consolidate generatePreviousTimingsUpToCurrent or are they for different porpuses?\n//  import generatePreviousTimingsUpToCurrent from './generate-previous-timings-up-to-current';\n\n/**\n * Generate a list of times, each rounded up to int.\n * from zero to the provided `time`.\n * eg if `time` is 6, the list would be[0, 1, 2, 3, 4, 5]\n * @param {Number} time - float, time in seconds\n */\n\nexport const generatePreviousTimings = (time) => {\n  // https://stackoverflow.com/questions/3746725/how-to-create-an-array-containing-1-n\n  if (time) {\n    return [...Array(parseInt(time)).keys()];\n  } else {\n    return [0];\n  }\n};\n\n/**\n * splices a list of times, int, up to a certain, index current time.\n * eg  `totalTimingsInt` is [0, 1, 2, 3, 4, 5] and `time` is 3, it retusn \"0 1 2\"\n * then it returns\n * @param {Array} totalTimingsInt -  list of timings int, generated with `generatePreviousTimings`\n * @param {Number} time - float, time in seconds\n * @returns {String}\n */\n\nfunction isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n}\n\nconst generateText = (paragraph, words) => {\n  return words\n    .filter((word) => word.start >= paragraph.start && word.end <= paragraph.end)\n    .map((w) => w.text)\n    .join(' ');\n};\n\nconst generatePreviousTimingsUpToCurrent = (totalTimingsInt, time) => {\n  return totalTimingsInt.splice(0, time, 0).join(' ');\n};\n\nconst generateTotalTimings = (words) => {\n  return generatePreviousTimings(words[words.length - 1].start);\n};\n\nexport const generatePreviousTimingsUpToCurrentOne = (words, start) => {\n  return generatePreviousTimingsUpToCurrent(generateTotalTimings(words), start);\n};\n\nconst convertDpeToSlate = (transcript, sttType) => {\n  if (isEmpty(transcript)) {\n    return [\n      {\n        speaker: 'U_UKN',\n        start: 0,\n        previousTimings: '0',\n        startTimecode: '00:00:00',\n        type: 'timedText',\n        children: [\n          {\n            text: 'Text',\n            // Adding list of words in slateJs paragraphs\n            words: [],\n          },\n        ],\n      },\n    ];\n  }\n  \n  // Transcript is converted to DPE format first and then converted to Slate format\n  // so that it can be used in slateJs.\n  let DPETranscript = {}\n  if (sttType === 'ibm') {\n    DPETranscript = convertIBMWatsonToDpe(transcript);\n  } else if (sttType === 'vtt') {\n    DPETranscript = convertVttToDpe(transcript); \n  } else if (sttType === 'plain') {\n    DPETranscript = convertTxtToDpe(transcript);\n  } else if (sttType === 'slatejs') {\n    return transcript;\n  } else {\n    throw new Error('Invalid sttType');\n  }\n\n  const { words, paragraphs } = DPETranscript;\n\n  let result = paragraphs.map((paragraph) => ({\n    speaker: paragraph.speaker,\n    start: paragraph.start,\n    previousTimings: generatePreviousTimingsUpToCurrentOne(words, paragraph.start),\n    // pre-computing the display of the formatting here so that it doesn't need to convert it in leaf render\n    startTimecode: shortTimecode(paragraph.start),\n    type: 'timedText',\n    children: [\n      {\n        text: generateText(paragraph, words),\n        // Adding list of words in slateJs paragraphs\n      },\n    ],\n  }));\n  result[0]['children'][0].words = words\n  return result;\n};\n\nexport default convertDpeToSlate;\n","/**\n * Converts WebVTT format to DPE transcription format.\n * @param {string} webvtt - WebVTT format string to be converted.\n * @returns {Object} - DPE transcription object with paragraphs and words.\n */\nfunction convertVttToDpe(webvtt) {\n  const lines = webvtt.split('\\n');\n\n  let dpeTranscription = {\n    paragraphs: [],\n    words: []\n  };\n\n  lines.forEach((line, index) => {\n    if (line.includes('-->')) {\n      // Extract start and end time from WebVTT line\n      const timeMatch = line.match(/(\\d{2}:\\d{2}:\\d{2}.\\d{3}) --> (\\d{2}:\\d{2}:\\d{2}.\\d{3})/);\n      const startTime = timeMatch ? convertTimeToSeconds(timeMatch[1]) : 0;\n      const endTime = timeMatch ? convertTimeToSeconds(timeMatch[2]) : 0;\n      let speakerMatch = null;\n      let speaker = null;\n      const speakerRegex = /([A-Z0-9\\s]+:)/\n\n      // Determine speaker information\n      if (lines[index + 1] && lines[index + 1].includes('<v')) {\n        speakerMatch = lines[index + 1].match(/<v ([a-zA-Z0-9]+)>/);\n        speaker = speakerMatch ? speakerMatch[1] : 'Add speaker';\n      }\n      else if (lines[index + 1] && lines[index + 1].match(speakerRegex)) {\n        speakerMatch = lines[index + 1].match(speakerRegex);\n        speaker = speakerMatch ? speakerMatch[1] : 'Add speaker';\n      }\n      else if (lines[index + 1] && lines[index + 2]) {\n        const nextLine = lines[index + 2];\n        const speakerLine = lines[index + 1];\n\n        if (nextLine.includes(':')) {\n          speakerMatch = nextLine.match(speakerRegex);\n          speaker = speakerMatch ? speakerLine + ' ' + speakerMatch[1] : 'Add speaker';\n        }\n        else {\n          speakerMatch = speakerLine.match(speakerRegex);\n          speaker = speakerMatch ? speakerMatch[1] : 'Add speaker';\n        }\n      }\n      else {\n        speaker = 'Add speaker';\n      }\n\n      speaker = speaker.replace(':', '')\n      let content = '';\n      let contentStarted = false;\n\n      // Extract content from WebVTT lines\n      for (let i = 1; lines[index + i]; i++) {\n        const currentLine = lines[index + i];\n        const nextLine = lines[index + i + 1] || '';\n\n        if (contentStarted || (!nextLine.includes(':'))) {\n          if (!contentStarted && currentLine.includes(':')) {\n            content += currentLine.split(':')[1].trim();\n            contentStarted = true;\n          } else {\n            content += ' ' + currentLine;\n          }\n        } else if (!currentLine.includes(':') && nextLine.includes(':')) {\n          content += nextLine.split(':')[1].trim();\n          contentStarted = true;\n          i += 1;\n        }\n      }\n\n      // Remove HTML tags and trailing spaces from content\n      content = content.replace(/<[^>]*>/g, '').trim();\n      if (content) {\n        // Add paragraph to DPE transcription\n        dpeTranscription.paragraphs.push({ start: startTime, end: endTime, speaker: speaker });\n\n        // Split content into words and add to the words array\n        const wordsArray = content && content.split(' ');\n        const wordDuration = (endTime - startTime) / (wordsArray ? wordsArray.length : 1);\n        const words = wordsArray && wordsArray.map((word, wordIndex) => ({\n          start: startTime + (wordIndex * wordDuration),\n          end: startTime + ((wordIndex + 1) * wordDuration),\n          text: word,\n          speaker\n        }));\n\n        dpeTranscription.words.push(...(words || []));\n      }\n    }\n  });\n\n  /**\n   * Converts time in HH:MM:SS format to seconds.\n   * @param {string} time - Time string in HH:MM:SS format.\n   * @returns {number} - Time in seconds.\n   */\n  function convertTimeToSeconds(time) {\n    const [hours, minutes, seconds] = time.split(':').map(Number);\n    return hours * 3600 + minutes * 60 + parseFloat(seconds);\n  }\n\n  return dpeTranscription;\n}\n\nexport { convertVttToDpe };\n","import { timecodeToSeconds } from \"../timecode-converter\";\n\n/**\n * Converts Text format to DPE transcription format.\n * @param {string} textTranscript - Text format string to be converted.\n * @returns {Object} - DPE transcription object with paragraphs and words.\n */\nfunction convertTxtToDpe(textTranscript) {\n  const lines = textTranscript.split(/\\n|<br>/);\n\n  let dpeTranscription = {\n    paragraphs: [],\n    words: []\n  };\n\n  let startTime = 0;\n  let endTime = 0;\n  let timeCodeMatch = null;\n  let timeCode = 0;\n  let skip = textTranscript.includes('TRANSCRIPTION BEGIN'); // skip lines until TRANSCRIPTION BEGIN is detected\n\n  lines.forEach((line, index) => {\n    var timecodeRegex = /\\[(?:[01]\\d|2[0-3]):(?:[0-5]\\d):(?:[0-5]\\d)\\]/g;\n    var regex = /\\b(?:\\w+(?:-\\w+)?(?:\\s+\\w+(?:-\\w+)?)*):\\s*/ig;\n    timeCodeMatch = line.match(timecodeRegex);\n\n    if(timeCodeMatch) {\n      timeCode = timeCodeMatch[0].replace(']', '').replace('[', '')\n      let matchedStartTime = timecodeToSeconds(timeCode);\n\n      if (matchedStartTime !== startTime) {\n        startTime = endTime;\n      }\n    }\n\n    if (!skip && !timecodeRegex.test(line)) {\n      let speaker = 'Add speaker'\n      let speakerMatch = line.match(regex);\n\n      if (speakerMatch) {\n        speaker = speakerMatch[0].replace(':', '').trim()\n      }\n\n      let content = line;\n\n      if (speakerMatch) {\n        content = content.replace(speakerMatch[0], '');\n      }\n\n      content = content.trim();\n\n      if (content) {\n        // Split content into words and add to the words array\n        const wordsArray = content && content.split(' ');\n        let wordDuration = 0.5;\n\n        // Add paragraph to DPE transcription\n        let endTimeMatch = lines[index + 2]?.match(timecodeRegex)\n        let endTimeCode = '';\n        let matchedEndTime = null;\n        let generatedEndTime = endTime;\n\n        if(endTimeMatch) {\n          endTimeCode = endTimeMatch[0].replace(']', '').replace('[', '')\n          matchedEndTime = timecodeToSeconds(endTimeCode);\n        }\n\n        generatedEndTime = (wordsArray.length * wordDuration) + endTime;\n\n        if (matchedEndTime === endTime) {\n          matchedEndTime = generatedEndTime;\n        }\n\n        endTime = matchedEndTime || generatedEndTime\n\n        dpeTranscription.paragraphs.push({ start: startTime, end: endTime, speaker: speaker });\n        wordDuration = (endTime - startTime) / wordsArray.length;\n\n        const words = wordsArray && wordsArray.map((word, wordIndex) => ({\n          start: startTime + (wordIndex * wordDuration),\n          end: startTime + ((wordIndex + 1) * wordDuration),\n          text: word,\n          speaker\n        }));\n\n        startTime = endTime\n        dpeTranscription.words.push(...(words || []));\n      }\n    }\n    if (skip) {\n      skip = !line.includes('TRANSCRIPTION BEGIN');\n    }\n  });\n\n  return dpeTranscription;\n}\n\nexport { convertTxtToDpe };\n","import { shortTimecode } from '../timecode-converter';\n/**\n * Helper function for OHMS format\n * OHMS is an open source indexing tool created by the University of Kentucky,\n * which is used by a number of cultural heritage institutions.\n * OHMS uses xml for the the index and a Word doc for the transcript\n * with timecodes at 30 second or 60 second intervals written in-line in the format of [hh:mm:ss]\n * `slate-transcript-editor` OHMS export option exports the word part.\n * Thi functions organises the words to add timecodes intervals at the required times.\n */\nconst insertTimecodesInline = ({ intervalSeconds = 30, transcriptData }) => {\n  let lastInsertTime = 0;\n\n  const sortedWords = transcriptData.words.sort((a, b) => a.start - b.start);\n\n  let newWords = [];\n  for (const word of sortedWords) {\n    if (word.start - lastInsertTime > intervalSeconds) {\n      lastInsertTime = Math.floor(word.start / intervalSeconds) * intervalSeconds;\n      const timecode = shortTimecode(lastInsertTime);\n      newWords.push({ start: word.start, end: word.start + (word.end - word.start) / 2, text: `[${timecode}]` });\n      word.start = word.start + (word.end - word.start) / 2;\n    }\n    newWords.push(word);\n  }\n  return {\n    ...transcriptData,\n    words: newWords,\n  };\n};\nexport default insertTimecodesInline;\n","/*\n * Pluck Unique Values from Array of Javascript Objects\n * https://gist.github.com/JamieMason/bed71c73576ba8d70a4671ea91b6178e\n */\nconst pluck = key => array => Array.from(new Set(array.map(obj => obj[key])));\n\nexport default pluck;\n","const subtitlesExportOptionsList = [\n  { type: 'srt', label: 'Srt', ext: 'srt' },\n  { type: 'vtt', label: 'VTT', ext: 'vtt' },\n  { type: 'vtt_speakers', label: 'VTT with speakers', ext: 'vtt' },\n  { type: 'itt', label: 'iTT', ext: 'itt' },\n  { type: 'ttml', label: 'TTML', ext: 'ttml' },\n  { type: 'premiereTTML', label: 'TTML for Adobe Premiere', ext: 'ttml' },\n  { type: 'csv', label: 'CSV', ext: 'csv' },\n  { type: 'pre-segment-txt', label: 'Pre segmented txt', ext: 'txt' },\n  { type: 'json', label: 'Json', ext: 'json' },\n];\n\nexport default subtitlesExportOptionsList;\n","const countWords = (text) => {\n  // return text.trim().replace(/\\n /g, '').replace(/\\n/g, ' ').split(' ').length;\n  // Don't count multiple spaces as multiple words\n  // https://www.w3schools.com/jsref/jsref_regexp_whitespace.asp\n  // Do a global search for whitespace characters in a string\n  return text.trim().replace(/\\s\\s+/g, ' ').split(' ').length;\n};\n\nexport default countWords;\n","/**\n * Convert Slate editor contnet to plain text without timecodes or speaker names\n * Text+speaker+timecode\n * TODO: have a separate one or some logic to get text without timecodes?\n *\n * Export looks like\n ```\n00:00:13\t\tF_S12\nThere is a day. About ten years ago when I asked a friend to hold a baby dinosaur called plea. All\n\n00:00:24\t\tF_S1\nthat\n\n00:00:24\t\tF_S12\nhe'd ordered and I was really excited about it because I've always loved about this one has really caught technical features. It had more orders and touch sensors. It had an infra red camera and one of the things that had was a tilt sensor so it. Knew what direction. It was facing. If and when you held it upside down.\n\n00:00:46\t\tU_UKN\nI thought.\n```\n */\n\nimport { shortTimecode } from '../../timecode-converter/index.js';\nimport { Node } from 'slate';\nconst slateToText = ({ value, speakers, timecodes, atlasFormat }) => {\n  return (\n    value\n      // Return the string content of each paragraph in the value's children.\n      .map((n) => {\n        if (atlasFormat) {\n          return `${timecodes ? `${speakers ? n.speaker : ''}\\t[${shortTimecode(n.start)}]\\t` : ''}\\t${Node.string(n)}`;\n        } else {\n          return `${timecodes ? `${shortTimecode(n.start)}\\t` : ''}${speakers ? n.speaker.toUpperCase() : ''}${\n            speakers || timecodes ? '\\n' : ''\n          }${Node.string(n)}`;\n        }\n      })\n      // Join them all with line breaks denoting paragraphs.\n      .join('\\n\\n')\n  );\n};\n\nexport default slateToText;\n","/**\n * converted from react-transcript-editor draftJS update timestamp helper function\n * https://github.com/pietrop/react-transcript-editor/blob/master/packages/components/timed-text-editor/UpdateTimestamps/index.js\n *\n */\nimport { alignSTT } from 'stt-align-node';\nimport slateToText from '../../txt';\n/**\n * Update timestamps usign stt-align module\n * @param {*} currentContent - slate js value\n * @param {*} words - list of stt words\n * @return slateJS value\n */\nexport const updateTimestampsHelper = (currentContent, words) => {\n  const currentText = slateToText({ value: currentContent, speakers: false, timecodes: false, atlasFormat: false });\n  const alignedWords = alignSTT(words, currentText);\n  return alignedWords;\n};\n\nexport default updateTimestampsHelper;\n","/**\n * converted from react-transcript-editor draftJS update timestamp helper function\n * https://github.com/pietrop/react-transcript-editor/blob/master/packages/components/timed-text-editor/UpdateTimestamps/index.js\n *\n */\nimport { shortTimecode } from '../../../timecode-converter';\nimport { generatePreviousTimingsUpToCurrentOne } from '../../../dpe-to-slate';\nimport countWords from '../../../count-words';\nimport updateTimestampsHelper from './update-timestamps-helper';\n/**\n * Transposes the timecodes from stt json list of words onto\n * slateJs value paragraphs\n */\nexport const createSlateContentFromSlateJsParagraphs = (currentContent, newEntities) => {\n  // Update entites to block structure.\n  const updatedBlockArray = [];\n  let totalWords = 0;\n\n  for (const blockIndex in currentContent) {\n    const block = currentContent[blockIndex];\n    const text = block.children[0].text;\n    // if copy and pasting large chunk of text\n    // currentContentBlock, would not have speaker and start/end time info\n    // so for updatedBlock, getting start time from first word in blockEntities\n    // const wordsInBlock = (text.match(/\\S+/g) || []).length;\n    const wordsInBlock = countWords(text);\n    const blockEntites = newEntities.slice(totalWords, totalWords + wordsInBlock);\n    let speaker = block.speaker;\n    const start = parseFloat(blockEntites[0].start);\n    if (!speaker) {\n      speaker = 'U_UKN';\n    }\n    const updatedBlock = {\n      type: 'timedText',\n      speaker: speaker,\n      start,\n      previousTimings: generatePreviousTimingsUpToCurrentOne(blockEntites, start),\n      startTimecode: shortTimecode(start),\n      children: [{ text }],\n    };\n\n    updatedBlockArray.push(updatedBlock);\n    totalWords += wordsInBlock;\n  }\n  return updatedBlockArray;\n};\n\n/**\n * Update timestamps usign stt-align module\n * @param {*} currentContent - slate js value\n * @param {*} words - list of stt words\n * @return slateJS value\n */\nconst updateTimestamps = (currentContent, words) => {\n  const alignedWords = updateTimestampsHelper(currentContent, words);\n  const updatedContent = createSlateContentFromSlateJsParagraphs(currentContent, alignedWords);\n  return updatedContent;\n};\n\nexport default updateTimestamps;\n","/**\n * converted from react-transcript-editor draftJS update timestamp helper function\n * https://github.com/pietrop/react-transcript-editor/blob/master/packages/components/timed-text-editor/UpdateTimestamps/index.js\n * similar to updateTimestamps\n */\n// import { alignSTT } from 'stt-align-node';\n// import slateToText from '../txt';\nimport countWords from '../../count-words';\nimport updateTimestampsHelper from './update-timestamps/update-timestamps-helper';\n/**\n * Transposes the timecodes from stt json list of words onto\n * dpe transcript with paragraphs and words\n */\nexport const createDpeParagraphsFromSlateJs = (currentContent, newEntities) => {\n  // Update entites to block structure.\n  const updatedBlockArray = [];\n  let totalWords = 0;\n\n  for (const blockIndex in currentContent) {\n    const block = currentContent[blockIndex];\n    const text = block.children[0].text;\n    const wordsInBlock = countWords(text);\n    const blockEntites = newEntities.slice(totalWords, totalWords + wordsInBlock);\n    let speaker = block.speaker;\n    const start = parseFloat(blockEntites[0].start);\n    const end = parseFloat(blockEntites[blockEntites.length - 1].end);\n    if (!speaker) {\n      speaker = 'U_UKN';\n    }\n    const updatedBlock = {\n      speaker: speaker,\n      start,\n      end,\n    };\n\n    updatedBlockArray.push(updatedBlock);\n    totalWords += wordsInBlock;\n  }\n  return updatedBlockArray;\n};\n\n/**\n * Update timestamps usign stt-align module\n * @param {*} currentContent - slate js value\n * @param {*} words - list of stt words\n * @return dpe transcript with paragraphs and words\n */\nconst converSlateToDpe = (currentContent, words) => {\n  const alignedWords = updateTimestampsHelper(currentContent, words);\n  const updatedContent = createDpeParagraphsFromSlateJs(currentContent, alignedWords);\n  return { words: alignedWords, paragraphs: updatedContent };\n};\n\nexport default converSlateToDpe;\n","import { Document, Paragraph, TextRun, Packer } from 'docx';\nimport { shortTimecode } from '../../timecode-converter/';\nimport { Node } from 'slate';\nexport default slateToDocx;\n\nfunction slateToDocx({\n  value,\n  speakers,\n  timecodes,\n  inlineTimecodes,\n  hideTitle,\n  title = 'Transcript',\n  creator = 'Slate Transcript Editor',\n  description = 'Transcript',\n}) {\n  const doc = new Document({\n    creator: creator,\n    description: description,\n    title: title,\n  });\n\n  if (!hideTitle) {\n    // Transcript Title\n    const textTitle = new TextRun(title);\n    const paragraphTitle = new Paragraph();\n    paragraphTitle.addRun(textTitle);\n    paragraphTitle.heading1().center();\n    doc.addParagraph(paragraphTitle);\n\n    // add spacing\n    var paragraphEmpty = new Paragraph();\n    doc.addParagraph(paragraphEmpty);\n  }\n\n  value.forEach((slateParagraph) => {\n    // TODO: use timecode converter module to convert from seconds to timecode\n\n    const paragraphSpeakerTimecodes = new Paragraph();\n    if (timecodes) {\n      const timecodeStartTime = new TextRun(shortTimecode(slateParagraph.start));\n      paragraphSpeakerTimecodes.addRun(timecodeStartTime);\n    }\n    if (speakers) {\n      if (timecodes) {\n        const speaker = new TextRun(slateParagraph.speaker).bold().tab();\n        paragraphSpeakerTimecodes.addRun(speaker);\n      } else {\n        const speaker = new TextRun(slateParagraph.speaker).bold();\n        paragraphSpeakerTimecodes.addRun(speaker);\n      }\n    }\n\n    const paragraphContents = Node.string(slateParagraph);\n    const textBreak = new TextRun('').break();\n\n    if (inlineTimecodes) {\n      paragraphSpeakerTimecodes.addRun(new TextRun(`${slateParagraph.speaker.toUpperCase()}:  ${paragraphContents}`));\n    }\n\n    if (timecodes || speakers || inlineTimecodes) {\n      doc.addParagraph(paragraphSpeakerTimecodes);\n      doc.addParagraph(new Paragraph());\n    }\n\n    if (!inlineTimecodes) {\n      const paragraphText = new Paragraph(paragraphContents);\n      paragraphText.addRun(textBreak);\n      doc.addParagraph(paragraphText);\n    }\n  });\n\n  const packer = new Packer();\n\n  packer.toBlob(doc).then((blob) => {\n    const filename = `${title}.docx`;\n    // // const type =  'application/octet-stream';\n    const a = document.createElement('a');\n    a.href = window.URL.createObjectURL(blob);\n    a.download = filename;\n    a.click();\n\n    return blob;\n  });\n}\n","const formatSeconds = seconds => new Date(seconds.toFixed(3) * 1000).toISOString().substr(11, 12);\n\nexport default formatSeconds;\n","'use strict';\nimport tokenizer from 'sbd';\n\nfunction textSegmentation(text, honorifics) {\n  var optionalHonorifics = null;\n\n  if (honorifics !== undefined) {\n    optionalHonorifics = honorifics;\n  }\n\n  var options = {\n    newline_boundaries: true,\n    html_boundaries: false,\n    sanitize: false,\n    allowed_tags: false,\n    //TODO: Here could open HONORIFICS file and pass them in here I think\n    //abbreviations: list of abbreviations to override the original ones for use with other languages. Don't put dots in abbreviations.\n    abbreviations: optionalHonorifics,\n  };\n\n  var sentences = tokenizer.sentences(text, options);\n  var sentencesWithLineSpaces = sentences.join('\\n');\n\n  return sentencesWithLineSpaces;\n}\n\nexport default textSegmentation;\n","'use strict';\n\nfunction addLineBreakBetweenSentences(text) {\n  return text.replace(/\\n/g, '\\n\\n');\n}\n\nexport default addLineBreakBetweenSentences;\n","/**\n * Helper function to remove space after carriage return \\n in lines\n * @param {string} text\n */\nfunction removeSpaceAfterCarriageReturn(text) {\n  return text.replace(/\\n /g, '\\n');\n}\n\nexport default removeSpaceAfterCarriageReturn;\n","'use strict';\nimport removeSpaceAfterCarriageReturn from '../util/remove-space-after-carriage-return.js';\n\n/*\n * Helper function\n * folds array of words\n * adds `\\n`\n * foldNumber = char after which to fold. eg 35 char default\n * TODO: this could be refactored with smaller helper functions\n */\nfunction foldWordsReturnArray(textArray, foldNumber = 35) {\n  var counter = 0;\n  var result = textArray.map((word, index, list) => {\n    counter += word.length + 1;\n    //resetting counter when there is a 'paragraph' line break \\n\\n\n    if (counter <= foldNumber) {\n      // if not last word in list\n      // cover edge case last element in array does not have a next element\n      if (list[index + 1] !== undefined) {\n        var nextElementLength = list[index + 1].length;\n        //check if adding next word would make the line go over the char limit foldNumber\n        if (counter + nextElementLength < foldNumber) {\n          return word;\n        } else {\n          // if it makes it go over, reset counter, return and add line break\n          counter = 0;\n\n          return `${word}\\n`;\n        }\n        //last word in the list\n      } else {\n        return word;\n      }\n      // if not greater then char foldNumber\n    } else {\n      counter = 0;\n\n      return `${word}\\n`;\n    }\n  });\n\n  return result;\n}\n\n/*\n * text string of words\n * foldNumber = char after which to fold. eg 35 char.\n */\nfunction foldWords(text, foldNumber) {\n  // split on two line break\n  var lineArr = text.split('\\n\\n');\n  // fold each line on non fold number char count\n  var foldedWordsInArray = lineArr.map(line => {\n    return foldWordsReturnArray(line.split(' '), foldNumber);\n  });\n  // flatten result\n  var foldedWordsFlatten = foldedWordsInArray.map(line => {\n    return line.join(' ');\n  });\n\n  // remove space after carriage return \\n in lines\n  const result = foldedWordsFlatten.map(r => {\n    return removeSpaceAfterCarriageReturn(r);\n  });\n  // return text\n\n  return result.join('\\n\\n');\n}\n\nexport default foldWords;\n","// Remove preceding empty space a beginning of line\n// without removing carriage returns\n// https://stackoverflow.com/questions/24282158/javascript-how-to-remove-the-white-space-at-the-start-of-the-string\n\nfunction removeSpaceAtBeginningOfLine(text) {\n  return text.map(r => {\n    return r.replace(/^\\s+/g, '');\n  });\n}\n\nexport default removeSpaceAtBeginningOfLine;\n","'use strict';\nimport removeSpaceAtBeginningOfLine from '../util/remove-space-at-beginning-of-line.js';\n\nfunction divideIntoTwoLines(text) {\n  var lines = text.split('\\n');\n\n  var counter = 0;\n\n  var result = lines.map(l => {\n    if (l === '') {\n      return l;\n    } else {\n      if (counter === 0) {\n        counter += 1;\n        if (l[l.length - 1][0] === '.') {\n          return l + '\\n\\n';\n        }\n\n        return l + '\\n';\n      } else if (counter === 1) {\n        counter = 0;\n\n        return l + '\\n\\n';\n      }\n    }\n  });\n\n  result = removeSpaceAtBeginningOfLine(result);\n  // remove empty lines from list to avoid unwanted space a beginning of line\n  result = result.filter(line => line.length !== 0);\n\n  result = result.join('').trim();\n\n  return result;\n}\n\nexport default divideIntoTwoLines;\n","import textSegmentation from './text-segmentation/index.js';\nimport addLineBreakBetweenSentences from './line-break-between-sentences/index.js';\nimport foldWords from './fold/index.js';\nimport divideIntoTwoLines from './divide-into-two-lines/index.js';\n\n/**\n * Takes in array of word object,\n *  and returns string containing all the text\n * @param {array} words - Words\n */\nfunction getTextFromWordsList(words) {\n  return words\n    .map((word) => {\n      return word.text;\n    })\n    .join(' ');\n}\n\n/**\n *\n * @param {*} textInput - can be either plain text string or an array of word objects\n */\nfunction preSegmentText(textInput, tmpNumberOfCharPerLine = 35) {\n  let text = textInput;\n  if (typeof textInput === 'object') {\n    text = getTextFromWordsList(textInput);\n  }\n  const segmentedText = textSegmentation(text);\n  // - 2.Line brek between stentences\n  const textWithLineBreakBetweenSentences = addLineBreakBetweenSentences(segmentedText);\n  // - 3.Fold char limit per line\n  const foldedText = foldWords(textWithLineBreakBetweenSentences, tmpNumberOfCharPerLine);\n  // - 4.Divide into two lines\n  const textDividedIntoTwoLines = divideIntoTwoLines(foldedText);\n\n  return textDividedIntoTwoLines;\n}\n\nexport { preSegmentText, getTextFromWordsList };\n\nexport default preSegmentText;\n","const AMP_REGEX = /&/g;\nconst LT_REGEX = /</g;\nconst GT_REGEX = />/g;\nconst escapeText = str =>\n  str\n    .replace(AMP_REGEX, '&amp;')\n    .replace(LT_REGEX, '&lt;')\n    .replace(GT_REGEX, '&gt;');\n\nexport default escapeText;\n","import escapeText from './util/escape-text.js';\nimport formatSeconds from './util/format-seconds.js';\n\nconst ttmlGeneratorPremiere = (vttJSON) => {\n  let ttmlOut = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\" ?>\n    <tt xmlns=\"http://www.w3.org/ns/ttml\"\n    xmlns:ttp=\"http://www.w3.org/ns/ttml#parameter\"\n    ttp:timeBase=\"media\"\n    xmlns:m608=\"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt#cea608\"\n    xmlns:smpte=\"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt\"\n    xmlns:ttm=\"http://www.w3.org/ns/ttml#metadata\">\n    <head>\n    <metadata>\n    <smpte:information m608:captionService=\"F1C1CC\" m608:channel=\"cc1\"/>\n    </metadata>\n    <styling></styling>\n    <layout></layout>\n    </head>\n    <body><div>`;\n\n  vttJSON.forEach((v) => {\n    ttmlOut += `<p begin=\"${formatSeconds(parseFloat(v.start))}\" end=\"${formatSeconds(parseFloat(v.end))}\">${escapeText(v.text).replace(\n      /\\n/g,\n      '<br />'\n    )}</p>\\n`;\n  });\n  ttmlOut += '</div>\\n</body>\\n</tt>';\n\n  return `${ttmlOut}`;\n};\n\nexport default ttmlGeneratorPremiere;\n","// for itt\nimport TC from 'smpte-timecode';\n\nconst tcFormat = (frames, FPS) => {\n  const tc = TC(Math.round(frames), FPS, false);\n\n  return tc.toString().replace(/^00/, '01'); // FIXME this breaks on videos longer than 1h!\n};\n\nexport default tcFormat;\n","import tcFormat from './util/tc-format.js';\nimport escapeText from './util/escape-text.js';\n\nconst ittGenerator = (vttJSON, lang = 'en-GB', FPS = 25) => {\n  let ittOut = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n        <tt\n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n          xmlns=\"http://www.w3.org/ns/ttml\"\n          xmlns:tt=\"http://www.w3.org/ns/ttml\"\n          xmlns:tts=\"http://www.w3.org/ns/ttml#styling\"\n          xmlns:ttp=\"http://www.w3.org/ns/ttml#parameter\"\n          xml:lang=\"${lang}\"\n          ttp:timeBase=\"smpte\"\n          ttp:frameRate=\"${FPS}\"\n          ttp:frameRateMultiplier=\"${FPS === 25 ? '1 1' : '999 1000'}\"\n          ttp:dropMode=\"nonDrop\"\n        >\n        <head>\n          <styling>\n            <style\n              xml:id=\"normal\"\n              tts:fontFamily=\"sansSerif\"\n              tts:fontWeight=\"normal\"\n              tts:fontStyle=\"normal\"\n              tts:color=\"white\"\n              tts:fontSize=\"100%\"\n            />\n          </styling>\n          <layout>\n            <region\n              xml:id=\"bottom\"\n              tts:origin=\"0% 85%\"\n              tts:extent=\"100% 15%\"\n              tts:textAlign=\"center\"\n              tts:displayAlign=\"after\"\n            />\n          </layout>\n        </head>\n        <body style=\"normal\" region=\"bottom\">\n          <div begin=\"-01:00:00:00\">`;\n  vttJSON.forEach(v => {\n    ittOut += `<p begin=\"${tcFormat(parseFloat(v.start) * FPS, FPS)}\" end=\"${tcFormat(parseFloat(v.end) * FPS, FPS)}\">${escapeText(v.text).replace(\n      /\\n/g,\n      '<br />'\n    )}</p>\\n`;\n  });\n  ittOut += '</div>\\n</body>\\n</tt>';\n\n  return ittOut;\n};\n\nexport default ittGenerator;\n","import escapeText from './util/escape-text.js';\nimport formatSeconds from './util/format-seconds.js';\n\nconst ttmlGenerator = vttJSON => {\n  let ttmlOut = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    <tt xmlns=\"http://www.w3.org/ns/ttml\">\n    <head></head>\n    <body>\n    <div>`;\n  vttJSON.forEach(v => {\n    ttmlOut += `<p begin=\"${formatSeconds(parseFloat(v.start))}\" end=\"${formatSeconds(parseFloat(v.end))}\">${escapeText(v.text).replace(\n      /\\n/g,\n      '<br />'\n    )}</p>\\n`;\n  });\n  ttmlOut += '</div>\\n</body>\\n</tt>';\n\n  return ttmlOut;\n};\n\nexport default ttmlGenerator;\n","import formatSeconds from './util/format-seconds.js';\nconst srtGenerator = vttJSON => {\n  let srtOut = '';\n  vttJSON.forEach((v, i) => {\n    srtOut += `${i + 1}\\n${formatSeconds(parseFloat(v.start)).replace('.', ',')} --> ${formatSeconds(parseFloat(v.end)).replace(\n      '.',\n      ','\n    )}\\n${v.text.trim()}\\n\\n`;\n  });\n\n  return srtOut;\n};\n\nexport default srtGenerator;\n","import formatSeconds from './util/format-seconds.js';\n\nconst vttGenerator = (vttJSON, speakers = false) => {\n  let vttOut = 'WEBVTT\\n\\n';\n  vttJSON.forEach((v, i) => {\n    vttOut += `${i + 1}\\n${formatSeconds(parseFloat(v.start))} --> ${formatSeconds(parseFloat(v.end))}\\n${speakers ? `<v ${v.speaker}>` : ``}${\n      v.text\n    }\\n\\n`;\n  });\n\n  return vttOut;\n};\n\nexport default vttGenerator;\n","import formatSeconds from './util/format-seconds.js';\nfunction csvGenerator(srtJsonContent) {\n  let lines = 'N, In, Out, Text\\n';\n  srtJsonContent.forEach((srtLineO, index) => {\n    lines += `${index + 1},`;\n    //need to surround timecodes with \"\\\"\" escaped \" to escape the , for the milliseconds\n    // lines += `\\\"${ srtLineO.start }\\\",\\\"${ srtLineO.end }\\\",`;\n    lines += `\\\"${formatSeconds(parseFloat(srtLineO.start)).replace('.', ',')}\\\",\\\"${formatSeconds(parseFloat(srtLineO.end)).replace('.', ',')}\\\",`;\n    // removing line breaks and and removing \" as they break the csv.\n    // wrapping text in escaped \" to  escape any , for the csv.\n    // adding carriage return \\n to signal end of line in csv\n    // Preserving line break within srt lines to allow round trip from csv back to srt file in same format.\n    // by replacing \\n with \\r\\n.\n    lines += `\\\"${srtLineO.text.replace(/\\n/g, '\\r\\n')}\\\"\\n`;\n  });\n\n  return lines;\n}\n\nexport default csvGenerator;\n","import formatSeconds from './compose-subtitles/util/format-seconds.js';\nimport textSegmentation from './presegment-text/text-segmentation/index.js';\nimport addLineBreakBetweenSentences from './presegment-text/line-break-between-sentences/index.js';\nimport foldWords from './presegment-text/fold/index.js';\nimport divideIntoTwoLines from './presegment-text/divide-into-two-lines/index.js';\nimport preSegmentText from './presegment-text/index.js';\nimport { getTextFromWordsList } from './presegment-text/index.js';\n\nimport ttmlGeneratorPremiere from './compose-subtitles/premiere.js';\nimport ittGenerator from './compose-subtitles/itt.js';\nimport ttmlGenerator from './compose-subtitles/ttml.js';\nimport srtGenerator from './compose-subtitles/srt.js';\nimport vttGenerator from './compose-subtitles/vtt.js';\nimport csvGenerator from './compose-subtitles/csv.js';\nimport countWords from '../../count-words';\n\nfunction segmentedTextToList(text) {\n  let result = text.split('\\n\\n');\n  result = result.map((line) => {\n    return line.trim();\n  });\n\n  return result;\n}\n\nfunction addTimecodesToLines(wordsList, paragraphs, lines) {\n  wordsList = wordsList.filter((w) => w.text.length > 0);\n  let startWordCounter = 0;\n  let endWordCounter = 0;\n  const results = lines.map((line) => {\n    endWordCounter += countWords(line);\n\n    const jsonLine = { text: line.trim() };\n    jsonLine.start = wordsList[startWordCounter].start;\n    // TODO: there's an issue here and `vtt_speakers_paragraphs` export is broken\n    jsonLine.end = wordsList[endWordCounter - 1].end;\n\n    // #-----------------|------|-----------------#\n    const possibleParagraphs = paragraphs\n      .filter((p) => jsonLine.start >= p.start && jsonLine.start < p.end)\n      .map((p) => {\n        const inParagraphEndTime = Math.min(jsonLine.end, p.end);\n        const inParagraphDuration = inParagraphEndTime - jsonLine.start;\n\n        const totalDuration = jsonLine.end - jsonLine.start;\n        const pctInParagraph = inParagraphDuration / totalDuration;\n\n        return {\n          ...p,\n          pctInParagraph,\n        };\n      })\n      .sort((a, b) => b.pctInParagraph - a.pctInParagraph || a.start - b.start); // sort by % in paragraph descending, then start time ascending\n    jsonLine.speaker = possibleParagraphs.length > 0 ? possibleParagraphs[0].speaker : 'UNKNOWN';\n    startWordCounter = endWordCounter;\n\n    return jsonLine;\n  });\n\n  return results;\n}\n\nfunction segmentTextByParagraph(wordList, paragraphs) {\n  let str = [];\n  let p_id = '0';\n\n  const sorted_paragraphs = paragraphs.sort((a, b) => a.start - b.start);\n  for (const { text, start } of wordList) {\n    const foundParagraph = sorted_paragraphs.filter((p) => p.start <= start && p.end >= start)[0];\n    if (foundParagraph.id !== p_id) {\n      p_id = foundParagraph.id;\n      str.push('\\n\\n');\n    }\n    str.push(text);\n  }\n  return str.join(' ');\n}\n\nfunction preSegmentTextJson(wordsList, paragraphs, numberOfCharPerLine, paragraphMode = false) {\n  let result;\n  if (paragraphMode) {\n    result = segmentTextByParagraph(wordsList, paragraphs);\n  } else {\n    result = preSegmentText(wordsList, numberOfCharPerLine);\n  }\n\n  const segmentedTextArray = segmentedTextToList(result);\n\n  return addTimecodesToLines(wordsList, paragraphs, segmentedTextArray);\n}\n\nfunction subtitlesComposer({ words, paragraphs, type, numberOfCharPerLine }) {\n  const subtitlesJson = preSegmentTextJson(words, paragraphs, numberOfCharPerLine, type === 'vtt_speakers_paragraphs');\n  if (typeof words === 'string') {\n    return preSegmentText(words, numberOfCharPerLine);\n  }\n  switch (type) {\n    case 'premiereTTML':\n      return ttmlGeneratorPremiere(subtitlesJson);\n    case 'ttml':\n      return ttmlGenerator(subtitlesJson);\n    case 'itt':\n      return ittGenerator(subtitlesJson);\n    case 'srt':\n      return srtGenerator(subtitlesJson);\n    case 'vtt':\n      return vttGenerator(subtitlesJson);\n    case 'vtt_speakers':\n    case 'vtt_speakers_paragraphs':\n      return vttGenerator(subtitlesJson, true);\n    case 'json':\n      // converting timecodes to captions time stamps\n      return subtitlesJson.map((line) => {\n        line.start = formatSeconds(parseFloat(line.start)).replace('.', ',');\n        line.end = formatSeconds(parseFloat(line.end)).replace('.', ',');\n        return line;\n      });\n    case 'csv':\n      return csvGenerator(subtitlesJson);\n    case 'pre-segment-txt':\n      return preSegmentText(words, numberOfCharPerLine);\n    case 'txt':\n      return preSegmentText(words, numberOfCharPerLine);\n    default:\n      return 'Could not find the subtitle format';\n  }\n}\n\nexport {\n  textSegmentation,\n  addLineBreakBetweenSentences,\n  foldWords,\n  divideIntoTwoLines,\n  getTextFromWordsList,\n  preSegmentText,\n  ttmlGeneratorPremiere,\n  ttmlGenerator,\n  ittGenerator,\n  srtGenerator,\n  vttGenerator,\n};\n\nexport default subtitlesComposer;\n","/**\n * Adapters for Draft.js conversion\n * @param {json} slateValue - Draft.js blocks\n * @param {string} type - the type of file supported by the available adapters\n */\n\nimport slateToText from './txt';\nimport converSlateToDpe from './slate-to-dpe';\nimport slateToDocx from '../export-adapters/docx';\nimport subtitlesExportOptionsList from './subtitles-generator/list';\nimport subtitlesGenerator from './subtitles-generator/index';\n\nconst captionTypeList = subtitlesExportOptionsList.map((list) => {\n  return list.type;\n});\n\nconst isCaptionType = (type) => {\n  const res = captionTypeList.includes(type);\n  return res;\n};\nconst exportAdapter = ({\n  slateValue,\n  type,\n  ext,\n  transcriptTitle,\n  speakers,\n  timecodes,\n  inlineTimecodes,\n  hideTitle,\n  atlasFormat,\n  dpeTranscriptData,\n}) => {\n  switch (type) {\n    case 'text':\n      return slateToText({ value: slateValue, speakers, timecodes, atlasFormat });\n    case 'json-slate':\n      return slateValue;\n    case 'json-digitalpaperedit':\n      return converSlateToDpe(slateValue, dpeTranscriptData);\n    case 'word':\n      //   return { data: draftToDocx(slateValue, transcriptTitle), ext: 'docx' };\n      return slateToDocx({\n        title: transcriptTitle,\n        value: slateValue,\n        speakers,\n        timecodes,\n        inlineTimecodes,\n        hideTitle,\n      });\n    default:\n      if (isCaptionType(type)) {\n        let editorContent = converSlateToDpe(slateValue, slateValue[0].children[0]);\n        editorContent.paragraphs.forEach(obj => {\n          if (obj['speaker'] === 'Add speaker') {\n            obj['speaker'] = '';\n          }\n        });\n        let subtitlesJson = subtitlesGenerator({\n          words: editorContent.words,\n          paragraphs: editorContent.paragraphs,\n          type,\n        });\n        return subtitlesJson;\n      }\n      // some default, unlikely to be called\n      console.error('Did not recognise the export format ', type);\n      return 'Did not recognise the export format';\n  }\n};\n\nexport default exportAdapter;\n","// https://stackoverflow.com/questions/679915/how-do-i-test-for-an-empty-javascript-object\nfunction isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n}\n\nexport default isEmpty;\n","// import { generatePreviousTimingsUpToCurrentOne } from '../dpe-to-slate';\n\n/**\n * See explanation in `src/utils/dpe-to-slate/index.js` for how this function works with css injection\n * to provide current paragaph's highlight.\n * @param {Number} currentTime - float in seconds\n */\nimport isEmpty from '../../is-empty';\n/**\n *\n * @param {*} currentTime\n * @param {*} transcriptData - dpe transcript data with timecodes at word level\n */\n// const generatePreviousTimingsUpToCurrent = (currentTime, transcriptData) => {\n//   // edge case - empty transcription\n//   if (isEmpty(transcriptData)) {\n//     return '';\n//   }\n//   const lastWordStartTime = transcriptData.words[transcriptData.words.length - 1].start;\n//   const lastWordStartTimeInt = parseInt(lastWordStartTime);\n//   const emptyListOfTimes = Array(lastWordStartTimeInt);\n//   const listOfTimesInt = [...emptyListOfTimes.keys()];\n//   const listOfTimesUpToCurrentTimeInt = listOfTimesInt.splice(0, currentTime, 0);\n//   const stringlistOfTimesUpToCurrentTimeInt = listOfTimesUpToCurrentTimeInt.join(' ');\n//   return stringlistOfTimesUpToCurrentTimeInt;\n// };\n\n// export default generatePreviousTimingsUpToCurrent;\n\n/**\n *\n * @param {*} currentTime\n * @param {*} transcriptDataSlateValue - slateJS value data with timecodes at paragraph level\n */\nconst generatePreviousTimingsUpToCurrent = (currentTime, transcriptDataSlateValue) => {\n  // edge case - empty transcription\n  if (isEmpty(transcriptDataSlateValue)) {\n    return '';\n  }\n  const lastWordStartTime = transcriptDataSlateValue[transcriptDataSlateValue.length - 1].start;\n  const lastWordStartTimeInt = parseInt(lastWordStartTime);\n  const emptyListOfTimes = Array(lastWordStartTimeInt);\n  const listOfTimesInt = [...emptyListOfTimes.keys()];\n  const listOfTimesUpToCurrentTimeInt = listOfTimesInt.splice(0, currentTime, 0);\n  const stringlistOfTimesUpToCurrentTimeInt = listOfTimesUpToCurrentTimeInt.join(' ');\n  return stringlistOfTimesUpToCurrentTimeInt;\n};\n\nexport default generatePreviousTimingsUpToCurrent;\n","const languagesArray = {\n     'ab' : 'Abkhazian', 'aa' : 'Afar', 'af' : 'Afrikaans', 'ak' : 'Akan', 'sq' : 'Albanian', 'am' : 'Amharic', 'ar' : 'Arabic', 'an' : 'Aragonese',\n                       'hy' : 'Armenian', 'as' : 'Assamese', 'av' : 'Avaric', 'ae' : 'Avestan', 'ay' : 'Aymara', 'az' : 'Azerbaijani', 'bm' : 'Bambara', 'ba' : 'Bashkir',\n                       'eu' : 'Basque', 'be' : 'Belarusian', 'bn' : 'Bengali', 'bh' : 'Bihari languages',\n                       'bi' : 'Bislama', 'bs' : 'Bosnian', 'br' : 'Breton', 'bg' : 'Bulgarian', 'my' : 'Burmese',\n                       'ca' : 'Catalan, Valencian', 'km' : 'Central Khmer', 'ch' : 'Chamorro', 'ce' : 'Chechen', 'ny' : 'Chichewa, Chewa, Nyanja', 'zh' : 'Chinese', 'zh-TW' : 'Chinese (Traditional)',\n                       'cu' : 'Church Slavonic, Old Bulgarian, Old Church Slavonic', 'cv' : 'Chuvash', 'kw' : 'Cornish', 'co' : 'Corsican', 'cr' : 'Cree', 'zh-Hans' : 'Chinese (Simplified)', 'zh-Hant' : 'Chinese (Traditional)',\n                       'hr' : 'Croatian', 'cs' : 'Czech', 'da' : 'Danish', 'dv' : 'Divehi, Dhivehi, Maldivian', 'nl' : 'Dutch, Flemish', 'dz' : 'Dzongkha',\n                       'en' : 'English', 'eo' : 'Esperanto', 'et' : 'Estonian', 'ee' : 'Ewe',\n                       'fo' : 'Faroese', 'fj' : 'Fijian', 'fi' : 'Finnish', 'fil' : 'Filipino', 'fr-FR' : 'French', 'fr' : 'French', 'ff' : 'Fulah', 'gd' : 'Gaelic, Scottish Gaelic', 'gl' : 'Galician',\n                       'lg' : 'Ganda', 'ka' : 'Georgian', 'de' : 'German', 'ki' : 'Gikuyu, Kikuyu', 'el' : 'Greek (Modern)', 'kl' : 'Greenlandic, Kalaallisut', 'gn' : 'Guarani',\n                       'gu' : 'Gujarati', 'ht' : 'Haitian, Haitian Creole', 'ha' : 'Hausa', 'haw' : 'Hawaiian', 'he' : 'Hebrew', 'hz' : 'Herero', 'hi' : 'Hindi', 'ho' : 'Hiri Motu', 'hu' : 'Hungarian',\n                       'is' : 'Icelandic', 'io' : 'Ido', 'ig' : 'Igbo', 'id' : 'Indonesian', 'ia' : 'Interlingua (International Auxiliary Language Association)', 'ie' : 'Interlingue',\n                       'iu' : 'Inuktitut', 'ik' : 'Inupiaq', 'iw' : 'Hebrew', 'ga' : 'Irish', 'it' : 'Italian', 'ja' : 'Japanese',\n                       'jv' : 'Javanese', 'kn' : 'Kannada', 'kr' : 'Kanuri', 'ks' : 'Kashmiri', 'kk' : 'Kazakh', 'kri' : 'Krio',\n                       'rw' : 'Kinyarwanda', 'kv' : 'Komi', 'kg' : 'Kongo', 'ko' : 'Korean', 'kj' : 'Kwanyama, Kuanyama', 'ku' : 'Kurdish', 'ky' : 'Kyrgyz', 'lo' : 'Lao',\n                       'la' : 'Latin', 'lv' : 'Latvian', 'lb' : 'Letzeburgesch, Luxembourgish', 'li' : 'Limburgish, Limburgan, Limburger', 'ln' : 'Lingala', 'lt' : 'Lithuanian',\n                       'lu' : 'Luba-Katanga', 'mk' : 'Macedonian', 'mg' : 'Malagasy', 'ms' : 'Malay', 'ml' : 'Malayalam',\n                       'mt' : 'Maltese', 'gv' : 'Manx', 'mi' : 'Maori', 'mr' : 'Marathi', 'mh' : 'Marshallese',\n                       'ro' : 'Moldovan, Moldavian, Romanian', 'mn' : 'Mongolian', 'nso' : 'Northern Sotho', 'na' : 'Nauru', 'nv' : 'Navajo, Navaho', 'nd' : 'Northern Ndebele', 'ng' : 'Ndonga',\n                       'ne' : 'Nepali', 'se' : 'Northern Sami', 'no' : 'Norwegian', 'nb' : 'Norwegian Bokml',\n                       'nn' : 'Norwegian Nynorsk', 'ii' : 'Nuosu, Sichuan Yi', 'oc' : 'Occitan (post 1500)',\n                       'oj' : 'Ojibwa', 'or' : 'Oriya', 'om' : 'Oromo', 'os' : 'Ossetian, Ossetic',\n                       'pi' : 'Pali', 'pa' : 'Panjabi, Punjabi', 'ps' : 'Pashto, Pushto', 'fa' : 'Persian',\n                       'pl' : 'Polish', 'pt' : 'Portuguese', 'qu' : 'Quechua', 'rm' : 'Romansh', 'rn' : 'Rundi',\n                       'ru' : 'Russian', 'sm' : 'Samoan', 'sg' : 'Sango', 'sa' : 'Sanskrit',\n                       'sc' : 'Sardinian', 'sr' : 'Serbian', 'sn' : 'Shona', 'sd' : 'Sindhi',\n                       'si' : 'Sinhala, Sinhalese',\n                       'sk' : 'Slovak', 'sl' : 'Slovenian', 'so' : 'Somali', 'st' : 'Sotho, Southern',\n                       'nr' : 'South Ndebele',\n                       'es' : 'Spanish', 'es-419' : 'Spanish (Latin America)', 'su' : 'Sundanese', 'sw' : 'Swahili', 'ss' : 'Swati',\n                       'sv' : 'Swedish', 'tl' : 'Tagalog', 'ty' : 'Tahitian', 'tg' : 'Tajik', 'ta' : 'Tamil',\n                       'tt' : 'Tatar', 'te' : 'Telugu', 'th' : 'Thai', 'bo' : 'Tibetan', 'ti' : 'Tigrinya',\n                       'to' : 'Tonga (Tonga Islands)', 'ts' : 'Tsonga', 'tn' : 'Tswana', 'tr' : 'Turkish',\n                       'tk' : 'Turkmen', 'tw' : 'Twi', 'ug' : 'Uighur, Uyghur', 'uk' : 'Ukrainian', 'ur' : 'Urdu', 'uz' : 'Uzbek', 've' : 'Venda', 'vi' : 'Vietnamese', 'vo' : 'Volap_k',\n                       'wa' : 'Walloon', 'cy' : 'Welsh', 'fy' : 'Western Frisian', 'wo' : 'Wolof', 'xh' : 'Xhosa', 'yi' : 'Yiddish', 'yo' : 'Yoruba', 'za' : 'Zhuang, Chuang', 'zu' : 'Zulu'\n                    }\n\nexport default languagesArray;\n","// MediaComponent.js\n\nimport React, { useRef } from 'react';\nimport YouTube from 'react-youtube';\n\nconst MediaComponent = (props) => {\n  const playerRef = useRef(null); // Ref to store the player object\n  const isYouTube = props.mediaUrl.includes('youtube.com');\n  const opts = {\n    playerVars: {\n      // https://developers.google.com/youtube/player_parameters\n      autoplay: 0,\n      fs: 0,\n      loop: 1,\n      showinfo: 0,\n      modestbranding: 1,\n      playsinline: 1,\n      enablejsapi: 1,\n    },\n  };\n\n  const _onReady = (event) => {\n    // Access the player object and set it using the parent-provided function\n    playerRef.current = event.target;\n    // Optionally, you can perform actions on the player here\n    // Pass the player object to the parent component\n    props.setPlayer(playerRef);\n  };\n\n  return (\n    <div className='wd-100'>\n      {isYouTube ? (\n        <YouTube videoId={extractVideoId(props.mediaUrl)} opts={opts} onReady={_onReady} iframeClassName='wd-100 height-25vh' />\n      ) : (\n        <video\n          ref={props.mediaRef}\n          src={props.mediaUrl}\n          width={props.width}\n          height={props.height}\n          controls\n          playsInline\n        ></video>\n      )}\n    </div>\n  );\n};\n\n// Function to extract video ID from YouTube URL\nconst extractVideoId = (url) => {\n  const videoIdMatch = url.match(/[?&]v=([^&#]+)/);\n  return videoIdMatch ? videoIdMatch[1] : '';\n};\n\nexport default MediaComponent;\n","import React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport path from 'path';\nimport { css } from '@emotion/css'\nimport Button from 'react-bootstrap/Button';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport Badge from 'react-bootstrap/Badge';\nimport { Tabs, Tab } from 'react-bootstrap'\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport { createEditor, Editor, Transforms, Text } from 'slate';\nimport { Slate, Editable, withReact, ReactEditor } from 'slate-react';\nimport { withHistory } from 'slate-history';\nimport {\n  faSave,\n  faFileDownload,\n  faUndo,\n  faSync,\n  faInfoCircle,\n  // faMehBlank,\n  faPause,\n  faEdit,\n  faAngleUp,\n  faAngleDown,\n  // faMusic,\n  // faClosedCaptioning,\n} from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { shortTimecode, timecodeToSeconds } from '../util/timecode-converter';\nimport download from '../util/downlaod/index.js';\nimport convertDpeToSlate from '../util/dpe-to-slate';\n// TODO: This should be moved in export utils\nimport insertTimecodesInline from '../util/inline-interval-timecodes';\nimport pluck from '../util/pluk';\nimport subtitlesExportOptionsList from '../util/export-adapters/subtitles-generator/list.js';\n// import updateTimestamps from '../util/update-timestamps';\nimport updateTimestamps from '../util/export-adapters/slate-to-dpe/update-timestamps';\nimport exportAdapter from '../util/export-adapters';\nimport isEmpty from '../util/is-empty';\nimport generatePreviousTimingsUpToCurrent from '../util/dpe-to-slate/generate-previous-timings-up-to-current';\nimport languagesArray from '../util/languages';\nimport MediaComponent from './media-component.js';\n\nconst PLAYBACK_RATE_VALUES = [0.2, 0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2, 2.25, 2.5, 3, 3.5];\nconst SEEK_BACK_SEC = 15;\nconst PAUSE_WHILTE_TYPING_TIMEOUT_MILLISECONDS = 1500;\nconst MAX_DURATION_FOR_PERFORMANCE_OPTIMIZATION_IN_SECONDS = 3600;\nconst TOOTLIP_DELAY = 1000;\nconst TOOTLIP_LONGER_DELAY = 2000;\n\nexport default function SlateTranscriptEditor(props) {\n  const [player, setPlayer] = useState(null);\n  const playerRef = useRef(null); // Ref to store the player object\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [playbackRate, setPlaybackRate] = useState(1);\n  const editor = useMemo(() => withReact(withHistory(createEditor())), []);\n  const [value, setValue] = useState([]);\n  const defaultShowSpeakersPreference = typeof props.showSpeakers === 'boolean' ? props.showSpeakers : true;\n  const defaultShowTimecodesPreference = typeof props.showTimecodes === 'boolean' ? props.showTimecodes : true;\n  const [showSpeakers, setShowSpeakers] = useState(defaultShowSpeakersPreference);\n  const [showTimecodes, setShowTimecodes] = useState(defaultShowTimecodesPreference);\n  const [speakerOptions, setSpeakerOptions] = useState([]);\n  const [showSpeakersCheatShet, setShowSpeakersCheatShet] = useState(false);\n  const [saveTimer, setSaveTimer] = useState(null);\n  const [isPauseWhiletyping, setIsPauseWhiletyping] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  // used isContentModified to avoid unecessarily run alignment if the slate value contnet has not been modified by the user since\n  // last save or alignment\n  const [isContentModified, setIsContentIsModified] = useState(false);\n  const [findContent, setFindContent] = useState('');\n  const [replaceContent, setReplaceContent] = useState('');\n  // Fields for the metadata editor\n  const [description, setDescription] = useState(props.metadata.description);\n  const [language, setLanguage] = useState(props.metadata.language);\n  const [isPublic, setIsPublic] = useState(!!props.metadata.is_public);\n  const [isCaption, setIsCaption] = useState(!!props.metadata.is_caption);\n  const [isDownloadable, setIsDownloadable] = useState(!!props.metadata.is_downloadable);\n  const [totalHits, setTotalHits] = useState(0);\n  const [currentHighlighted, setCurrentHighlighted] = useState(0);\n\n  useEffect(() => {\n    if (isProcessing) {\n      document.body.style.cursor = 'wait';\n    } else {\n      document.body.style.cursor = 'default';\n    }\n  }, [isProcessing]);\n\n  useEffect(() => {\n    if (props.transcriptData) {\n      const res = convertDpeToSlate(props.transcriptData, props.sttType);\n      setValue(res);\n    }\n  }, []);\n\n  useEffect(() => {\n    props.setTranscriptDataSaved(false);\n  }, [isContentModified])\n\n  // handles interim results for working with a Live STT\n  useEffect(() => {\n    if (props.transcriptDataLive) {\n      const nodes = convertDpeToSlate(props.transcriptDataLive, props.sttType);\n      // if the user is selecting the / typing the text\n      // Transforms.insertNodes would insert the node at seleciton point\n      // instead we check if they are in the editor\n      if (editor.selection) {\n        // get the position of the last node\n        const positionLastNode = [editor.children.length];\n        // insert the new nodes at the end of the document\n        Transforms.insertNodes(editor, nodes, {\n          at: positionLastNode,\n        });\n      }\n      // use not having selection in the editor allows us to also handle the initial use case\n      // where the might be no initial results\n      else {\n        // if there is no selection the default for insertNodes is to add the nodes at the end\n        Transforms.insertNodes(editor, nodes);\n      }\n    }\n  }, [props.transcriptDataLive]);\n\n  useEffect(() => {\n    const getUniqueSpeakers = pluck('speaker');\n    const uniqueSpeakers = getUniqueSpeakers(value);\n    setSpeakerOptions(uniqueSpeakers);\n  }, [showSpeakersCheatShet]);\n\n  useEffect(() => {\n    // Update the document title using the browser API\n    if (props.mediaRef && props.mediaRef.current) {\n      // setDuration(props.mediaRef.current.duration);\n      props.mediaRef.current.addEventListener('timeupdate', handleTimeUpdated);\n    }\n    return function cleanup() {\n      // removeEventListener\n      if (!props.mediaUrl.includes('youtube.com')){\n        props.mediaRef.current.removeEventListener('timeupdate', handleTimeUpdated);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    // Update the document title using the browser API\n    if (props.mediaRef && props.mediaRef.current) {\n      // Not working\n      setDuration(props.mediaRef.current.duration);\n      if (props.mediaRef.current.duration >= MAX_DURATION_FOR_PERFORMANCE_OPTIMIZATION_IN_SECONDS) {\n        setShowSpeakers(false);\n        showTimecodes(false);\n      }\n    }\n  }, [props.mediaRef]);\n\n  const getSlateContent = () => {\n    return value;\n  };\n\n  const getFileTitle = () => {\n    if (props.title) {\n      return props.title;\n    }\n    return path.basename(props.mediaUrl).trim();\n  };\n\n  const getMediaType = () => {\n    const clipExt = path.extname(props.mediaUrl);\n    let tmpMediaType = props.mediaType ? props.mediaType : 'video';\n    if (clipExt === '.wav' || clipExt === '.mp3' || clipExt === '.m4a' || clipExt === '.flac' || clipExt === '.aiff') {\n      tmpMediaType = 'audio';\n    }\n    return tmpMediaType;\n  };\n\n  const breakParagraph = () => {\n    Editor.insertBreak(editor);\n  };\n  const insertTextInaudible = () => {\n    Transforms.insertText(editor, '[INAUDIBLE]');\n  };\n\n  const handleInsertMusicNote = () => {\n    Transforms.insertText(editor, ''); // or \n  };\n\n  const handleSetShowSpeakersCheatShet = () => {\n    setShowSpeakersCheatShet(!showSpeakersCheatShet);\n  };\n\n  const handleTimeUpdated = (e) => {\n    setCurrentTime(e.target.currentTime);\n    // TODO: setting duration here as a workaround\n    setDuration(props.mediaRef.current.duration);\n  };\n\n  const handleSetPlaybackRate = (e) => {\n    const tmpNewPlaybackRateValue = parseFloat(e.target.value);\n    if (props.mediaRef && props.mediaRef.current) {\n      props.mediaRef.current.playbackRate = tmpNewPlaybackRateValue;\n      setPlaybackRate(tmpNewPlaybackRateValue);\n    } else if (playerRef && playerRef.current) {\n      playerRef.current.setPlaybackRate(tmpNewPlaybackRateValue);\n    }\n  };\n\n  const handleSeekBack = () => {\n    if (props.mediaRef && props.mediaRef.current) {\n      props.mediaRef.current.currentTime = props.mediaRef.current.currentTime - SEEK_BACK_SEC;\n    } else if (playerRef && playerRef.current) {\n      let currentTime = playerRef.current.getCurrentTime();\n      playerRef.current.seekTo(currentTime - SEEK_BACK_SEC);\n    }\n  };\n\n  const handleSetPlayer = (playerObject) => {\n    setPlayer(playerObject);\n  };\n\n  useEffect(() => {\n    if (player) {\n      playerRef.current = player.current;\n    }\n  }, [player]);\n\n  const renderElement = useCallback((props) => {\n    switch (props.element.type) {\n      case 'timedText':\n        return <TimedTextElement {...props} />;\n      default:\n        return <DefaultElement {...props} />;\n    }\n  }, []);\n  \n  const decorate = useCallback(\n    ([node, path]) => {\n      const ranges = []\n\n      if (findContent && Text.isText(node)) {\n        const { text } = node\n        const parts = text.split(findContent)\n        let offset = 0\n\n        parts.forEach((part, i) => {\n          if (i !== 0) {\n            ranges.push({\n              anchor: { path, offset: offset - findContent.length },\n              focus: { path, offset },\n              highlight: true,\n            })\n          }\n\n          offset = offset + part.length + findContent.length\n        })\n      }\n      return ranges\n    },\n    [findContent]\n  )\n\n  useEffect(() => {\n    const delay = 150;\n    const timeoutId = setTimeout(() => {\n      const totalHitsSpan = document.getElementById('total-hits');\n      let highlightedSpans = document.querySelectorAll('span[data-cy=\"search-highlighted\"]');\n      setTotalHits(highlightedSpans.length);\n\n      if(currentHighlighted >= highlightedSpans.length && highlightedSpans.length > 0) {\n        setCurrentHighlighted(currentHighlighted % highlightedSpans.length)\n      }\n\n      if(highlightedSpans.length > 0) {\n        highlightedSpans[currentHighlighted].classList.add('current-highlighted');\n        highlightedSpans[currentHighlighted].scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n\n      if (findContent.length === 0 || totalHits === 0) {\n        totalHitsSpan.classList.remove('has-content');\n        totalHitsSpan.innerHTML = '';\n      }\n\n      if (totalHits > 0) {\n        totalHitsSpan.classList.add('has-content');\n        totalHitsSpan.innerHTML = totalHits + ' matches';\n      }\n    }, delay);\n\n    return () => clearTimeout(timeoutId);\n  }, [findContent, totalHits]);\n\n  const Leaf = ({ attributes, children, leaf }) => {\n    return (\n      <span\n        {...attributes}\n        onDoubleClick={handleTimedTextClick}\n        {...(leaf.highlight && { 'data-cy': 'search-highlighted' })}\n        className={css`\n          font-weight: ${leaf.bold && 'bold'};\n          background-color: ${leaf.highlight && '#ffeeba'};\n        `}\n        data-start={children.props.parent.start}\n        data-previous-timings={children.props.parent.previousTimings}\n        title={children.props.parent.start}\n      >\n        {children}\n      </span>\n    );\n  };\n  /**\n   * `handleSetSpeakerName` is outside of TimedTextElement\n   * to improve the overall performance of the editor,\n   * especially on long transcripts\n   * @param {*} element - props.element, from `renderElement` function\n   */\n  const handleSetSpeakerName = async (element) => {\n    const pathToCurrentNode = ReactEditor.findPath(editor, element);\n    const oldSpeakerName = element.speaker;\n    const newSpeakerName = await createAccessibleDialog('Change speaker name', oldSpeakerName, true);\n\n    if (newSpeakerName) {\n      if (oldSpeakerName.toString().toLowerCase() !== 'add speaker')\n        var message = `Would you like to replace all occurrences of ${oldSpeakerName} with ${newSpeakerName}?`;\n      else\n        var message = `Would you like to add speaker ${newSpeakerName} to this line or all lines?`;\n\n      const shouldUpdateAllSpeakerInstances = await createAccessibleDialog(\n        message, null, false, true\n      );\n      if (shouldUpdateAllSpeakerInstances) {\n        const rangeForTheWholeEditor = Editor.range(editor, []);\n        // Apply transformation to the whole doc, where speaker matches old speaker name, and set it to new one\n        Transforms.setNodes(\n          editor,\n          { type: 'timedText', speaker: newSpeakerName },\n          {\n            at: rangeForTheWholeEditor,\n            match: (node) => node.type === 'timedText' && node.speaker.toString().toLowerCase() === oldSpeakerName.toString().toLowerCase(),\n          }\n        );\n      } else if (shouldUpdateAllSpeakerInstances === false) {\n        // only apply speaker name transformation to current element\n        Transforms.setNodes(editor, { type: 'timedText', speaker: newSpeakerName }, { at: pathToCurrentNode });\n      }\n      const maxSpeakerLength = findLongestSpeakerNameLength(editor.children)\n      const minWidth = maxSpeakerLength < 17 ? maxSpeakerLength + 1 : 17;\n      document.querySelectorAll('.speakers-col').forEach(element => {\n        element.style.minWidth = minWidth+'ch';\n      });\n    }\n  };\n\n  // Function to create an accessible dialog\n  const createAccessibleDialog = (\n    message, defaultValue, displayInput, isReplaceDialog = false\n  ) => {\n    return new Promise((resolve) => {\n      const dialogContainer = document.createElement('div');\n      dialogContainer.setAttribute('role', 'dialog');\n      dialogContainer.setAttribute('aria-modal', 'true');\n      dialogContainer.setAttribute('aria-labelledby', 'promptMessage');\n      dialogContainer.classList.add('dialog-container');\n\n      const messageElement = document.createElement('p');\n      messageElement.setAttribute('id', 'promptMessage');\n      messageElement.textContent = message;\n      dialogContainer.appendChild(messageElement);\n\n      const inputField = document.createElement('input');\n\n      if (displayInput) {\n        if (message !== 'Change speaker name') {\n          inputField.setAttribute('type', 'text');\n          inputField.setAttribute('aria-label', message);\n          inputField.value = defaultValue || '';\n          dialogContainer.appendChild(inputField);\n        } else {\n            inputField.setAttribute('type', 'text');\n            inputField.setAttribute('aria-label', message);\n            inputField.value = '';\n\n            const dataList = document.createElement('datalist');\n            const dataListId = 'speaker-suggestions';\n\n            const autocompleteSuggestions = [...new Set(editor.children.map(node => node.speaker).filter(speaker => speaker !== 'Add speaker'))];\n\n            dataList.id = dataListId;\n            autocompleteSuggestions.forEach((suggestion) => {\n              const option = document.createElement('option');\n              option.value = suggestion;\n              dataList.appendChild(option);\n            });\n\n            inputField.setAttribute('list', dataListId);\n\n            // Append the input field and datalist to the dialog container\n            dialogContainer.appendChild(inputField);\n            dialogContainer.appendChild(dataList);\n        }\n      }\n\n      if (isReplaceDialog) {\n        const oneButton = document.createElement('button');\n        oneButton.textContent = 'Replace One';\n        oneButton.addEventListener('click', () => {\n          let resolution = displayInput ? inputField.value : false;\n          resolve(resolution);\n\n          document.body.removeChild(dialogContainer);\n        });\n        dialogContainer.appendChild(oneButton);\n      }\n\n      const okButton = document.createElement('button');\n      okButton.textContent = isReplaceDialog ? 'Replace All' : 'OK';\n      okButton.addEventListener('click', () => {\n        let resolution = displayInput ? inputField.value : true;\n        resolve(resolution);\n\n        document.body.removeChild(dialogContainer);\n      });\n      dialogContainer.appendChild(okButton);\n\n      const cancelButton = document.createElement('button');\n      cancelButton.textContent = 'Cancel';\n      cancelButton.addEventListener('click', () => {\n        document.body.removeChild(dialogContainer);\n      });\n      dialogContainer.appendChild(cancelButton);\n\n      document.body.appendChild(dialogContainer);\n      const focusableElement = displayInput ? inputField : okButton;\n      focusableElement.focus();\n    });\n  };  \n\n  const handleTimeCodeEdit = async (element) => {\n    const pathToCurrentNode = ReactEditor.findPath(editor, element);\n    const oldTimeCode = element.startTimecode\n    const newTimeCode = await createAccessibleDialog('Change timecode', oldTimeCode, true);\n\n    if (isValidTimeCode(newTimeCode) && isTimeCodeBetweenRange(newTimeCode, pathToCurrentNode)) {\n      Transforms.setNodes(editor, { type: 'timedText', startTimecode: newTimeCode, start: timecodeToSeconds(newTimeCode) }, { at: pathToCurrentNode });\n    } else {\n      alert('Please enter the time code in the correct format HH:MM:SS and make sure that it is between the previous and next time code');\n    }\n  }\n\n  const isValidTimeCode = (timeCode) => {\n    const timeCodeFormatRegex = /^(?:[01]\\d|2[0-3]):(?:[0-5]\\d):(?:[0-5]\\d)$/;\n    return (timeCode && timeCodeFormatRegex.test(timeCode))\n  }\n\n  const isTimeCodeBetweenRange = (timeCode, pathToCurrentNode) => {\n    const prevNodeTimeCode = timecodeToSeconds(editor.children[pathToCurrentNode[0] - 1]?.startTimecode);\n    const nextNodeTimeCode = timecodeToSeconds(editor.children[pathToCurrentNode[0] + 1]?.startTimecode);\n    const convertedNewTimeCode = timecodeToSeconds(timeCode);\n\n    return (isNaN(prevNodeTimeCode) && convertedNewTimeCode <= nextNodeTimeCode) ||\n           (isNaN(nextNodeTimeCode) && convertedNewTimeCode >= prevNodeTimeCode) ||\n           (convertedNewTimeCode >= prevNodeTimeCode && convertedNewTimeCode <= nextNodeTimeCode);\n  }\n\n  const handleTimeCodeSync = async (element) => {\n    const pathToCurrentNode = ReactEditor.findPath(editor, element);\n    let currentTime = '';\n\n    if (props.mediaRef && props.mediaRef.current) {\n      currentTime = props.mediaRef.current.currentTime;\n    } else if (playerRef && playerRef.current) {\n      currentTime = playerRef.current.getCurrentTime();\n    }\n\n    Transforms.setNodes(editor, { type: 'timedText', startTimecode: shortTimecode(currentTime), start: timecodeToSeconds(currentTime) }, { at: pathToCurrentNode });\n  }\n\n  const TimedTextElement = (props) => {\n    let textLg = 12;\n    let textXl = 12;\n    if (!showSpeakers && !showTimecodes) {\n      textLg = 12;\n      textXl = 12;\n    } else if (showSpeakers && !showTimecodes) {\n      textLg = 9;\n      textXl = 9;\n    } else if (!showSpeakers && showTimecodes) {\n      textLg = 9;\n      textXl = 10;\n    } else if (showSpeakers && showTimecodes) {\n      textLg = 6;\n      textXl = 7;\n    }\n\n    return (\n      <Row {...props.attributes} className='mb-3 border-bottom pb-3' style={{textAlign: props.attributes.dir === 'rtl' ? 'right' : 'left'}}>\n        {showTimecodes && (\n          <Col contentEditable={false} className={'text-truncate p-0 pl-3 col-auto'}>\n            <code\n              contentEditable={false}\n              style={{ cursor: 'pointer' }}\n              className={'timecode text-muted unselectable'}\n              onClick={handleTimedTextClick}\n              title={props.element.startTimecode}\n              data-start={props.element.start}\n            >\n              {props.element.startTimecode}\n               <OverlayTrigger\n                 delay={TOOTLIP_DELAY}\n                 placement={'bottom'}\n                 overlay={\n                  <Tooltip id=\"tooltip-disabled\">\n                    Edit the timecode to change to whatever you want\n                  </Tooltip>\n                 }\n               >\n               <FontAwesomeIcon\n                 icon={faEdit} \n                 onClick={handleTimeCodeEdit.bind(this, props.element)} \n                 onKeyDown={(e) => handleTimeCodeEditKeyPress(e, props.element)}\n                 pull=\"left\" \n                 className='mt-1'\n                 tabIndex={0} \n                 role='button'\n                 title={'Edit Timecode' + props.element.startTimecode}\n                 aria-label={'Edit timecode' + props.element.startTimecode}\n                />\n              </OverlayTrigger>\n              <OverlayTrigger\n                 delay={TOOTLIP_DELAY}\n                 placement={'bottom'}\n                 overlay={\n                  <Tooltip id=\"tooltip-disabled\">\n                    Set the time from current position\n                  </Tooltip>\n                 }\n               >\n                <FontAwesomeIcon\n                 icon={faSync}\n                 onClick={handleTimeCodeSync.bind(this, props.element)}\n                 pull=\"left\"\n                 className='mt-1'\n                 tabIndex={0}\n                 role='button'\n                 />\n              </OverlayTrigger>\n            </code>\n          </Col>\n        )}\n        {showSpeakers && (\n          <Col contentEditable={false} className={'p-0 pl-3 text-left col-auto speakers-col'} style={{minWidth: findLongestSpeakerNameLength(editor.children)+'ch', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', maxWidth: '17ch'}}>\n            <span\n              contentEditable={false}\n              className={'text-muted'}\n              tabIndex={0}\n              style={{\n                cursor: 'pointer',\n                textTransform: props.element.speaker !== 'Add speaker' ? 'uppercase' : '',\n                fontStyle: props.element.speaker === 'Add speaker' ? 'italic' : 'normal',\n              }}\n              title={props.element.speaker}\n              onClick={handleSetSpeakerName.bind(this, props.element)}\n              onKeyDown={(e) => handleSetSpeakerNameKeyPress(e, props.element)}\n            >\n            {props.element.speaker}\n            </span>\n          </Col>            \n        )}\n        <Col className={'p-b-1 wd-fit'} tabIndex={1}>\n          {props.children}\n        </Col>\n      </Row>\n    );\n  };\n\n  const handleSetSpeakerNameKeyPress = (e, element) => {\n    if (e.key === ' ' || e.key === 'Spacebar') {\n      e.preventDefault();\n      handleSetSpeakerName(element);\n    }\n  };\n\n  const handleTimeCodeEditKeyPress = (e, element) => {\n    if (e.key === ' ' || e.key === 'Spacebar') {\n      e.preventDefault();\n      handleTimeCodeEdit(element);\n    }\n  };\n\n  const findLongestSpeakerNameLength = (speakers) => {\n    let maxLength = 0;\n\n    speakers.forEach(speakerObj => {\n        if (speakerObj.speaker && speakerObj.speaker.length > maxLength) {\n            maxLength = speakerObj.speaker.length;\n        }\n    });\n\n    return maxLength > 17 ? 17 : maxLength + 1;\n  }\n\n  const DefaultElement = (props) => {\n    return <p {...props.attributes}>{props.children}</p>;\n  };\n\n  const handleTimedTextClick = (e) => {\n    if (e.target.classList.contains('timecode')) {\n      if (playerRef && playerRef.current) {\n        const start = parseFloat(e.target.dataset.start);\n        playerRef.current.seekTo(start, true);\n      } else {\n          const start = e.target.dataset.start;\n          if (props.mediaRef && props.mediaRef.current) {\n            props.mediaRef.current.currentTime = parseFloat(start);\n            props.mediaRef.current.play();\n          }\n      }\n    } else if (e.target.dataset.slateString) {\n      if (e.target.parentNode.dataset.start) {\n        const start = e.target.parentNode.dataset.start;\n        if (props.mediaRef && props.mediaRef.current && start) {\n          props.mediaRef.current.currentTime = parseFloat(start);\n          props.mediaRef.current.play();\n        }\n      }\n    }\n  };\n\n  // TODO: refacto this function, to be cleaner and easier to follow.\n  const handleRestoreTimecodes = async (inlineTimecodes = false) => {\n    if (!isContentModified && !inlineTimecodes) {\n      return value;\n    }\n    if (inlineTimecodes) {\n      const transcriptData = insertTimecodesInline({ transcriptData: props.transcriptData });\n      const alignedSlateData = await updateTimestamps(convertDpeToSlate(transcriptData, props.sttType), transcriptData);\n      setValue(alignedSlateData);\n      setIsContentIsModified(false);\n      return alignedSlateData;\n    } else {\n      const alignedSlateData = await updateTimestamps(value, props.transcriptData);\n      setValue(alignedSlateData);\n      setIsContentIsModified(false);\n      return alignedSlateData;\n    }\n  };\n\n  const handleExport = async ({ type, ext, speakers, timecodes, inlineTimecodes, hideTitle, atlasFormat, isDownload }) => {\n    try {\n      setIsProcessing(true);\n      let tmpValue = getSlateContent();\n      if (timecodes) {\n        tmpValue = await handleRestoreTimecodes();\n      }\n\n      if (inlineTimecodes) {\n        tmpValue = await handleRestoreTimecodes(inlineTimecodes);\n      }\n\n  \n      //TODO: Handle update time codes\n      // if (isContentModified && type === 'json-slate') {\n      //   tmpValue = await handleRestoreTimecodes();\n      // }\n\n      let editorContnet = exportAdapter({\n        slateValue: tmpValue,\n        type,\n        transcriptTitle: getFileTitle(),\n        speakers,\n        timecodes,\n        inlineTimecodes,\n        hideTitle,\n        atlasFormat,\n        dpeTranscriptData: props.transcriptData,\n      });\n    \n      if (ext === 'json') {\n        editorContnet = JSON.stringify(editorContnet, null, 2);\n      }\n      if (ext !== 'docx' && isDownload) {\n        download(editorContnet, `${getFileTitle()}.${ext}`);\n      }\n      return editorContnet;\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      setIsProcessing(true);\n      const format = props.autoSaveContentType ? props.autoSaveContentType : 'digitalpaperedit';\n      handleExport({ type: `json-${format}`, isDownload: false })\n        .then(editorContent => {\n            if (props.handleSaveEditor) {\n                props.handleSaveEditor(editorContent, { description, language, isDownloadable, isCaption, isPublic });\n            }\n        });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleSaveAndClose = async () => {\n    try {\n      setIsProcessing(true);\n      const format = props.autoSaveContentType ? props.autoSaveContentType : 'digitalpaperedit';\n      handleExport({ type: `json-${format}`, isDownload: false })\n        .then(editorContent => {\n            if (props.handleSaveAndClose) {\n                props.handleSaveAndClose(editorContent, { description, language, isDownloadable, isCaption, isPublic });\n            }\n        });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  /**\n   * See explanation in `src/utils/dpe-to-slate/index.js` for how this function works with css injection\n   * to provide current paragaph's highlight.\n   * @param {Number} currentTime - float in seconds\n   */\n  // const generatePreviousTimingsUpToCurrent = (currentTime) => {\n  //   // edge case - empty transcription\n  //   if (isEmpty(props.transcriptData)) {\n  //     return '';\n  //   }\n  //   const lastWordStartTime = props.transcriptData.words[props.transcriptData.words.length - 1].start;\n  //   const lastWordStartTimeInt = parseInt(lastWordStartTime);\n  //   const emptyListOfTimes = Array(lastWordStartTimeInt);\n  //   const listOfTimesInt = [...emptyListOfTimes.keys()];\n  //   const listOfTimesUpToCurrentTimeInt = listOfTimesInt.splice(0, currentTime, 0);\n  //   const stringlistOfTimesUpToCurrentTimeInt = listOfTimesUpToCurrentTimeInt.join(' ');\n  //   return stringlistOfTimesUpToCurrentTimeInt;\n  // };\n\n  const handleSetPauseWhileTyping = () => {\n    setIsPauseWhiletyping(!isPauseWhiletyping);\n  };\n\n  const handleOnKeyDown = (event) => {\n    setIsContentIsModified(true);\n    if (isPauseWhiletyping) {\n      // logic for pause while typing\n      // https://schier.co/blog/wait-for-user-to-stop-typing-using-javascript\n      // TODO: currently eve the video was paused, and pause while typing is on,\n      // it will play it when stopped typing. so added btn to turn feature on off.\n      // and disabled as default.\n      // also pause while typing might introduce performance issues on longer transcripts\n      // if on every keystroke it's creating and destroing a timer.\n      // should find a more efficient way to \"debounce\" or \"throttle\" this functionality\n      if (props.mediaRef && props.mediaRef.current) {\n        props.mediaRef.current.pause();\n      } else if (playerRef && playerRef.current) {\n        playerRef.current.pauseVideo();\n      }\n\n      if (saveTimer !== null) {\n        clearTimeout(saveTimer);\n      }\n\n      const tmpSaveTimer = setTimeout(() => {\n        if (props.mediaRef && props.mediaRef.current) {\n          props.mediaRef.current.play();\n        } else if (playerRef && playerRef.current) {\n          playerRef.current.playVideo();\n        }\n      }, PAUSE_WHILTE_TYPING_TIMEOUT_MILLISECONDS);\n      setSaveTimer(tmpSaveTimer);\n    }\n  };\n\n  const handleTranscriptTitleEdit = (event) => {\n    if (event.keycode >= 37 && event.keycode <= 40) {\n      return;\n    }\n    if (event.keycode >= 13) {\n      event.preventDefault();\n      return; // Do not allow carriage return in transcript titles\n    }\n    props.handleSaveTranscriptTitle(event.target.innerHTML);\n  }\n\n  const handleReplaceOne = () => {\n    const children = editor.children;\n    const highlightedSpans = Array.from(document.querySelectorAll('span[data-cy=\"search-highlighted\"]'));\n    \n    const occurrencesList = children.map(child => {\n      const text = child.children[0].text;\n      return text.split(findContent).length - 1;\n    });\n  \n    let currentIndex = currentHighlighted;\n\n    let childIndex = 0;\n    let traversedCount = 0;\n  \n    for (let i = 0; i < occurrencesList.length; i++) {\n      if ((traversedCount - 1 < currentIndex) && ((occurrencesList[i] + traversedCount) > currentIndex)) {\n        childIndex = i;\n      }\n      traversedCount += occurrencesList[i];\n    }\n  \n    const text = children[childIndex].children[0].text;\n    const occurrenceCount = text.split(findContent).length - 1;\n    \n    let t = 0;\n    const regex = new RegExp(findContent, \"g\");\n    let n = currentIndex % occurrenceCount;\n    n = n === 0 ? 1 : n + 1;\n\n    const newText = text.replace(regex, match => ++t === n ? replaceContent : match);\n    \n    const newChild = {\n      ...JSON.parse(JSON.stringify(children[childIndex])),\n      children: [{ text: newText }]\n    };\n  \n    Transforms.insertNodes(\n      editor,\n      newChild,\n      { at: [childIndex] }\n    );\n  \n    Transforms.removeNodes(editor, { at: [childIndex + 1] });\n    setTotalHits(totalHits - 1);\n\n    /** if the replacement contains the original text in some way as a substring,\n        then forcefully move the current index to the next hit */\n    if (regex.test(replaceContent)) {\n      setCurrentHighlighted(currentIndex + 1);\n    }\n\n    if (currentIndex === highlightedSpans.length - 1) {\n      setCurrentHighlighted(0);\n    }\n  };\n\n  const handleReplaceAll = () => {\n    let children = editor.children;\n\n    for(let i = 0; i < children.length; i++) {\n      let text = children[i].children[0].text;\n      let newText = text.replaceAll(findContent, replaceContent);\n      let newChild = JSON.parse(JSON.stringify(children[i]));\n      newChild.children[0].text = newText;\n\n      Transforms.insertNodes(\n        editor,\n        { ...newChild },\n        { at: [i] }\n      )\n\n      Transforms.removeNodes(editor, { at: [i+1] } );\n    }\n  }\n\n  const handleSelectNext = () => {\n    if (!findContent) { return; }\n\n    // Get all spans with data-cy=\"search-highlighted\"\n    let highlightedSpans = document.querySelectorAll('span[data-cy=\"search-highlighted\"]');\n\n    // Get the next index, or use 0 if no span is currently highlighted\n    let nextIndex = (currentHighlighted + 1) % highlightedSpans.length;\n\n    // Remove 'current-highlighted' class from the current span\n    highlightedSpans[currentHighlighted].classList.remove('current-highlighted');\n\n    // Add 'current-highlighted' class to the next span\n    highlightedSpans[nextIndex].classList.add('current-highlighted');\n    setCurrentHighlighted(nextIndex);\n    highlightedSpans[nextIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });\n  };\n\n  const handleSelectPrev = () => {\n    if (!findContent) { return; }\n\n    // Get all spans with data-cy=\"search-highlighted\"\n    let highlightedSpans = document.querySelectorAll('span[data-cy=\"search-highlighted\"]');\n\n    // Get the previous index, or use the last index if no span is currently highlighted\n    let prevIndex = currentHighlighted === 0 ? highlightedSpans.length - 1 : (currentHighlighted - 1 + highlightedSpans.length) % highlightedSpans.length;\n\n    // Remove 'current-highlighted' class from the current span\n    highlightedSpans[currentHighlighted].classList.remove('current-highlighted');\n\n    // Add 'current-highlighted' class to the previous span\n    highlightedSpans[prevIndex].classList.add('current-highlighted');\n    setCurrentHighlighted(prevIndex);\n    highlightedSpans[prevIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });\n  };\n\n  const handleTimeCodes = (event) => {\n    /*\n     When a paragraph is split, use the count of words in the original paragraph to calculate the duration of words using next\n     paragraph's start timecode and replace the new paragraph's start timecode with the new one.\n    */\n    if (event.keyCode === 13) { \n      const rangeForTheWholeEditor = Editor.range(editor, []);    \n      let nodes = editor.children;\n      for(let i = 0; i < nodes.length; i++) {\n        if (nodes[i - 1] && nodes[i].type === 'timedText' && nodes[i].start === nodes[i - 1].start && nodes[i].startTimecode === nodes[i - 1].startTimecode) {\n          let fullText = nodes[i - 1].children[0].text + nodes[i].children[0].text;\n          let words = fullText.split(' ');\n          let wordLength = words.length; \n          let duration = (nodes[i + 1]?.start || (nodes[i].start + nodes[i].children[0].text.split(' ').length * 0.5)) - nodes[i].start;\n          let wordDuration = duration / wordLength;\n          let newStart = nodes[i - 1].start + wordDuration * nodes[i - 1].children[0].text.split(' ').length;\n          let newTimecode = shortTimecode(newStart);\n\n          Transforms.setNodes(\n            editor,\n            { type: 'timedText', start: newStart, startTimecode: newTimecode },\n            {\n              at: rangeForTheWholeEditor,\n              match: (node) => node.type === 'timedText' && node.start === nodes[i].start && node.startTimecode === nodes[i].startTimecode && node.children[0].text === nodes[i].children[0].text\n            }\n          )\n        }\n      }\n    }\n  };\n\n  // Function to handle form submission\n  const handleUpdateDescription = () => {\n    props.saveMetadata({ description, language, isDownloadable, isCaption, isPublic });\n  };\n\n  const skip_to_content = (event) => {\n    if (event.keyCode === 13 || event.keyCode === 32) {\n      Transforms.select(editor, {\n        anchor: { path: [0, 0], offset: 0 },\n        focus: { path: [0, 0], offset: 0 },\n      })\n    }\n  };\n  \n  return (\n    <Container fluid style={{ backgroundColor: '#eee', height: '100vh', paddingTop: '1em' }}>\n      <style scoped>\n        {`\n              /* Next words */\n             .timecode[data-previous-timings*=\"${generatePreviousTimingsUpToCurrent(parseInt(currentTime), value)}\"]{\n                  color:  #9E9E9E;\n              }\n          `}\n      </style>\n      <style scoped>\n        {`.editor-wrapper-container{\n                padding: 8px 16px;\n                background: #f9f9f9;\n                box-shadow: 0 0 10px #ccc;\n                height: 90vh;\n                overflow: auto;\n              }\n              /* https://developer.mozilla.org/en-US/docs/Web/CSS/user-select\n              TODO: only working in Chrome, not working in Firefox, and Safari - OSX\n              if selecting text, not showing selection\n              Commented out because it means cannot select speakers and timecode anymore\n              which is the intended default behavior but needs to come with export\n              functionality to export as plain text, word etc.. otherwise user won't be able\n              to get text out of component with timecodes and speaker names in the interim */\n              .unselectable {\n                -moz-user-select: none;\n                -webkit-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n              }\n              .timecode:hover{\n                text-decoration: underline;\n              }\n              .timecode.text:hover{\n                text-decoration:none;\n              }\n              `}\n      </style>\n      <div id=\"skiptocontent\" className=\"skiptocontent\" tabIndex=\"1\" onKeyUp={skip_to_content}>Skip to main content</div>\n      <Row>\n        {props.showTitle ? (\n              <div className=\"text-truncate text-left top-title\">\n                  <span>Editing transcript </span>\n                  <OverlayTrigger\n                    placement={'bottom'}\n                    overlay={<Tooltip id=\"tooltip-disabled\">{`Click and edit to edit the transcript title and then hit save icon to save it`}</Tooltip>}\n                  >\n                    <span className='display-inline fw-bold editable' contentEditable={true} onBlur={handleTranscriptTitleEdit}>{props.title}</span> \n                  </OverlayTrigger>\n                  <span> of </span> \n                  <span className='display-inline fw-bold'>{props.resourceTitle}</span>\n              </div>\n        ) : null}\n        <div className='find-replace-container'>\n          <Form>\n            <Row>\n              <Col className='tl-right' xs={3} sm={3} md={3} lg={7} xl={8}>\n                <Form.Group controlId=\"findReplaceContentFields\">\n                  <Row>\n                    <span id='total-hits' style={{minWidth: '150px'}}/>\n                    <Col>\n                      <Form.Control\n                          as=\"input\"\n                          value={findContent}\n                          placeholder='Find'\n                          onChange={(e) => setFindContent(e.target.value)}\n                      />\n                    </Col>\n                    <OverlayTrigger\n                        placement={'bottom'}\n                        overlay={\n                          <Tooltip id=\"tooltip-disabled\">\n                            Move to next\n                          </Tooltip>\n                        }\n                    >\n                      <FontAwesomeIcon\n                          icon={faAngleDown}\n                          onClick={handleSelectNext}\n                          pull=\"left\"\n                          className='mt-2 cursor-pointer'\n                          tabIndex={0}\n                          role='button'\n                          size='lg'\n                      />\n                    </OverlayTrigger>\n                    <OverlayTrigger\n                        placement={'bottom'}\n                        overlay={\n                          <Tooltip id=\"tooltip-disabled\">\n                            Move to previous\n                          </Tooltip>\n                        }\n                    >\n                      <FontAwesomeIcon\n                          icon={faAngleUp}\n                          onClick={handleSelectPrev}\n                          pull=\"left\"\n                          className='mt-2 ml-2 cursor-pointer'\n                          tabIndex={0}\n                          role='button'\n                          size='lg'\n                      />\n                    </OverlayTrigger>\n                    <Col>\n                      <Form.Control\n                          as=\"input\"\n                          placeholder='Replace'\n                          value={replaceContent}\n                          onChange={(e) => setReplaceContent(e.target.value)}\n                      />\n                    </Col>\n                  </Row>\n                </Form.Group>\n              </Col>\n              <Col className='tl-right' xs={3} sm={3} md={3} lg={4} xl={4}>\n                <Row>\n                  <Col className='pl-0 pr-0'>\n                    <Button variant=\"primary\" onClick={handleReplaceOne} className='btn-update-description replace-btn'>\n                      Replace One\n                    </Button>\n                  </Col>\n                  <Col className='pl-0'>\n                    <Button variant=\"primary\" onClick={handleReplaceAll} className='btn-update-description replace-btn'>\n                      Replace All\n                    </Button>\n                  </Col>\n                  </Row>\n              </Col>\n            </Row>\n          </Form>\n        </div>\n      </Row>\n\n      <Row>\n        <Col\n          xs={{ span: 12, order: 1 }}\n          sm={getMediaType() === 'audio' ? { span: 10, offset: 1 } : 3}\n          md={getMediaType() === 'audio' ? { span: 10, offset: 1 } : 3}\n          lg={getMediaType() === 'audio' ? { span: 8, offset: 2 } : 3}\n          xl={getMediaType() === 'audio' ? { span: 8, offset: 2 } : 3}\n          className=\"d-flex flex-column\"\n        >\n          <Row>\n          <MediaComponent\n            mediaRef={props.mediaRef}\n            mediaUrl={props.mediaUrl}\n            width={'100%'}\n            height={getMediaType() === 'audio' ? '60em' : 'auto'}\n            controls\n            playsInline\n            setPlayer={handleSetPlayer}\n          />\n          </Row>\n          <Row>\n            <Col xs={5} sm={1} md={1} lg={1} xl={2} className={'pt-1 pl-0'}>\n              <Button variant=\"primary\" onClick={handleSaveAndClose} className='btn-update-description save-close-btn'>\n                Save & Close\n              </Button>\n            </Col>\n            <Col xs={4} sm={2} md={2} lg={2} xl={2} className={'p-1 ml-auto'} style={{marginRight: '5px'}}>\n              <Form.Control\n                as=\"select\"\n                defaultValue={playbackRate}\n                onChange={handleSetPlaybackRate}\n                title={'Change the playback speed of the player'}\n                className={'p-0'}\n              >\n                {PLAYBACK_RATE_VALUES.map((playbackRateValue, index) => {\n                  return (\n                    <option key={index + playbackRateValue} value={playbackRateValue}>\n                      x {playbackRateValue}\n                    </option>\n                  );\n                })}\n              </Form.Control>\n            </Col>\n            <Col xs={3} sm={3} md={3} lg={2} xl={1} className={'p-1'}>\n              <OverlayTrigger\n                delay={TOOTLIP_DELAY}\n                placement={'bottom'}\n                overlay={<Tooltip id=\"tooltip-disabled\">{`Seek back by ${SEEK_BACK_SEC} seconds`}</Tooltip>}\n              >\n                <span className=\"d-inline-block\">\n                  <Button variant=\"light\" onClick={handleSeekBack} block className='fs-17'>\n                    <FontAwesomeIcon icon={faUndo} />\n                  </Button>\n                </span>\n              </OverlayTrigger>\n            </Col>\n            <Col xs={3} sm={3} md={3} lg={2} xl={1} className={'p-1'} style={{marginLeft: '15px'}}>\n                <OverlayTrigger\n                  OverlayTrigger\n                  delay={TOOTLIP_LONGER_DELAY}\n                  placement={'bottom'}\n                  overlay={<Tooltip id=\"tooltip-disabled\">Export options</Tooltip>}\n                >\n                  <span className=\"d-inline-block\">\n                    <DropdownButton\n                      disabled={isProcessing}\n                      id=\"dropdown-basic-button\"\n                      title={<FontAwesomeIcon icon={faFileDownload} />}\n                      variant=\"light\"\n                    >\n                      {/* TODO: need to run re-alignement if exportin with timecodes true, otherwise they'll be inaccurate */}\n                      <Dropdown.Item style={{ color: 'black' }} disabled>\n                        <b>Text Export</b>\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        onClick={() => {\n                          handleExport({\n                            type: 'text',\n                            ext: 'txt',\n                            speakers: false,\n                            timecodes: false,\n                            isDownload: true,\n                          });\n                        }}\n                      >\n                        Text (<code>.txt</code>)\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        onClick={() => {\n                          handleExport({\n                            type: 'text',\n                            ext: 'txt',\n                            speakers: true,\n                            timecodes: false,\n                            isDownload: true,\n                          });\n                        }}\n                      >\n                        Text (Speakers)\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        onClick={() => {\n                          handleExport({\n                            type: 'text',\n                            ext: 'txt',\n                            speakers: false,\n                            timecodes: true,\n                            isDownload: true,\n                          });\n                        }}\n                      >\n                        Text (Timecodes)\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        onClick={() => {\n                          handleExport({\n                            type: 'text',\n                            ext: 'txt',\n                            speakers: true,\n                            timecodes: true,\n                            isDownload: true,\n                          });\n                        }}\n                        disable\n                      >\n                        Text (Speakers & Timecodes)\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        onClick={() => {\n                          handleExport({\n                            type: 'text',\n                            ext: 'txt',\n                            speakers: true,\n                            timecodes: true,\n                            atlasFormat: true,\n                            isDownload: true,\n                          });\n                        }}\n                        disable\n                      >\n                        Text (Atlas format)\n                      </Dropdown.Item>\n                      {/* TODO: need to run re-alignement if exportin with timecodes true */}\n                      <Dropdown.Divider />\n                      <Dropdown.Item\n                        onClick={() => {\n                          handleExport({\n                            type: 'word',\n                            ext: 'docx',\n                            speakers: false,\n                            timecodes: false,\n                            isDownload: true,\n                          });\n                        }}\n                      >\n                        Word (<code>.docx</code>)\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        onClick={() => {\n                          handleExport({\n                            type: 'word',\n                            ext: 'docx',\n                            speakers: true,\n                            timecodes: false,\n                            isDownload: true,\n                          });\n                        }}\n                      >\n                        Word (Speakers)\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        onClick={() => {\n                          handleExport({\n                            type: 'word',\n                            ext: 'docx',\n                            speakers: false,\n                            timecodes: true,\n                            isDownload: true,\n                          });\n                        }}\n                      >\n                        Word (Timecodes)\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        onClick={() => {\n                          handleExport({\n                            type: 'word',\n                            ext: 'docx',\n                            speakers: true,\n                            timecodes: true,\n                            isDownload: true,\n                          });\n                        }}\n                      >\n                        Word (Speakers & Timecodes)\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        onClick={() => {\n                          handleExport({\n                            type: 'word',\n                            ext: 'docx',\n                            speakers: false,\n                            timecodes: false,\n                            inlineTimecodes: true,\n                            hideTitle: true,\n                          });\n                        }}\n                      >\n                        Word (OHMS)\n                      </Dropdown.Item>\n                      <Dropdown.Divider />\n\n                      <Dropdown.Item style={{ color: 'black' }} disabled>\n                        <b>Closed Captions Export</b>\n                      </Dropdown.Item>\n                      {subtitlesExportOptionsList.map(({ type, label, ext }, index) => {\n                        return (\n                          <Dropdown.Item\n                            key={index + label}\n                            onClick={() => {\n                              handleExport({ type, ext, isDownload: true });\n                            }}\n                          >\n                            {label} (<code>.{ext}</code>)\n                          </Dropdown.Item>\n                        );\n                      })}\n                    </DropdownButton>\n                  </span>\n                </OverlayTrigger>\n            </Col>\n            <Col xs={3} sm={3} md={3} lg={2} xl={1} className={'p-1'} style={{marginLeft: '21px'}}>\n              <OverlayTrigger\n                OverlayTrigger\n                delay={TOOTLIP_LONGER_DELAY}\n                placement={'bottom'}\n                overlay={<Tooltip id=\"tooltip-disabled\">Save</Tooltip>}\n              >\n                <Button disabled={isProcessing} onClick={handleSave} variant=\"light\" className='fs-17'>\n                  <FontAwesomeIcon icon={faSave} />\n                </Button>\n              </OverlayTrigger>\n            </Col>\n            <Col xs={3} sm={3} md={3} lg={2} xl={1} className={'p-1'} style={{marginLeft: '10px'}}>\n              <OverlayTrigger\n                delay={TOOTLIP_DELAY}\n                placement={'bottom'}\n                overlay={\n                  <Tooltip id=\"tooltip-disabled\">\n                    Turn {isPauseWhiletyping ? 'off' : 'on'} pause while typing functionality. As you start typing the media while pause playback\n                    until you stop. Not reccomended on longer transcript as it might present performance issues.\n                  </Tooltip>\n                }\n              >\n                <Button disabled={isProcessing} onClick={handleSetPauseWhileTyping} variant={isPauseWhiletyping ? 'secondary' : 'light'} className='fs-17'>\n                  <FontAwesomeIcon icon={faPause} />\n                </Button>\n              </OverlayTrigger>\n            </Col>\n          </Row>\n          <Row className='flex-grow-1 align-items-end'>\n            <Col className='p-0 d-flex flex-column'>\n              <div className='metadata-editor-container'>\n                <Tabs defaultActiveKey=\"description\" id=\"tabs\">\n                  <Tab eventKey=\"description\" title=\"Description\">\n                    <Form className='pt-3 flex-grow-1'>\n                      <Form.Group controlId=\"descriptionField\">\n                        <Form.Label>Description</Form.Label>\n                        <Form.Control\n                          as=\"textarea\"\n                          rows={3}\n                          value={description}\n                          onChange={(e) => setDescription(e.target.value)}\n                          style={{ resize: 'none' }}\n                        />\n                      </Form.Group>\n\n                      <Form.Group controlId=\"languageDropdown\">\n                        <Form.Label>Language</Form.Label>\n                        <Form.Control\n                          as=\"select\"\n                          value={language}\n                          onChange={(e) => setLanguage(e.target.value)}\n                        >\n                          {Object.keys(languagesArray).map((code) => (\n                            <option key={code} value={code}>\n                              {languagesArray[code]}\n                            </option>\n                          ))}\n                        </Form.Control>\n                      </Form.Group>\n\n                      <Form.Group controlId=\"publicDropdown\">\n                        <Form.Label>Public</Form.Label>\n                        <Form.Control\n                          as=\"select\"\n                          value={isPublic}\n                          onChange={(e) => setIsPublic(e.target.value)}\n                        >\n                          <option value='true'>Yes</option>\n                          <option value='false'>No</option>\n                        </Form.Control>\n                      </Form.Group>\n\n                      <Form.Group controlId=\"captionCheckbox\" className='custom-checkbox'>\n                        <Form.Check\n                          type=\"checkbox\"\n                          label=\"Is Caption?\"\n                          checked={isCaption}\n                          onChange={(e) => setIsCaption(e.target.checked)}\n                          className='custom-checkbox-input'\n                        />\n                      </Form.Group>\n\n                      <Form.Group controlId=\"downloadableCheckbox\" className='custom-checkbox'>\n                        <Form.Check\n                          type=\"checkbox\"\n                          label=\"Is Downloadable?\"\n                          checked={isDownloadable}\n                          onChange={(e) => setIsDownloadable(e.target.checked)}\n                          className='custom-checkbox-input'\n                        />\n                      </Form.Group>\n                      <div className='d-flex align-items-end justify-content-end'>\n                        <Button variant=\"primary\" onClick={handleUpdateDescription} className='btn-update-description mt-10-vh'>\n                          Update Description\n                        </Button>\n                      </div>\n                    </Form>\n                  </Tab>\n                  <Tab eventKey=\"annotations\" title=\"Annotations\">\n                    {/* Left for implementation */}\n                    <p>Coming soon...</p>\n                  </Tab>\n                </Tabs>\n              </div>\n            </Col>\n          </Row>\n        </Col>\n        <Col\n          xs={{ span: 12, order: 3 }}\n          sm={getMediaType() === 'audio' ? { span: 10, order: 2, offset: 1 } : { span: 9, order: 2 }}\n          md={getMediaType() === 'audio' ? { span: 10, order: 2, offset: 1 } : { span: 9, order: 2 }}\n          lg={getMediaType() === 'audio' ? { span: 8, order: 2, offset: 2 } : { span: 9, order: 2 }}\n          xl={getMediaType() === 'audio' ? { span: 8, order: 2, offset: 2 } : { span: 9, order: 2 }}\n        >\n          {value.length !== 0 ? (\n            <>\n              <section className=\"editor-wrapper-container\">\n                <Slate\n                  editor={editor}\n                  value={value}\n                  onChange={(value) => {\n                    return setValue(value);\n                  }}\n                >\n                  <Editable\n                    readOnly={typeof props.isEditable === 'boolean' ? !props.isEditable : false}\n                    renderElement={renderElement}\n                    renderLeaf={Leaf}\n                    onKeyDown={handleOnKeyDown}\n                    onKeyUp={handleTimeCodes}\n                    decorate={decorate}\n                  />\n                  </Slate>\n              </section>\n            </>\n          ) : (\n            <section className=\"text-center\">\n              <i className=\"text-center\">Loading...</i>\n            </section>\n          )}\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nSlateTranscriptEditor.propTypes = {\n  transcriptData: PropTypes.object.isRequired,\n  mediaUrl: PropTypes.string.isRequired,\n  handleSaveEditor: PropTypes.func,\n  handleSaveAndClose: PropTypes.func,\n  handleAutoSaveChanges: PropTypes.func,\n  autoSaveContentType: PropTypes.string,\n  isEditable: PropTypes.bool,\n  showTimecodes: PropTypes.bool,\n  showSpeakers: PropTypes.bool,\n  title: PropTypes.string,\n  resourceTitle: PropTypes.string,\n  handleSaveTranscriptTitle: PropTypes.func,\n  showTitle: PropTypes.bool,\n  mediaType: PropTypes.string,\n  transcriptDataLive: PropTypes.object,\n  mediaRef: PropTypes.object,\n  sttType: PropTypes.string,\n  saveMetadata: PropTypes.func,\n  metadata: PropTypes.object,\n  isTranscriptDataSaved: PropTypes.bool,\n  setTranscriptDataSaved: PropTypes.func,\n};\n\nSlateTranscriptEditor.defaultProps = {\n  showTitle: false,\n  showTimecodes: true,\n  showSpeakers: true,\n  mediaType: 'digitalpaperedit',\n  isEditable: true,\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport SlateTranscriptEditor from './components/index.js';\nimport { secondsToTimecode, timecodeToSeconds, shortTimecode } from './util/timecode-converter/index.js';\nimport convertDpeToSlate from './util/dpe-to-slate/index.js';\nimport converSlateToDpe from './util/export-adapters/slate-to-dpe/index.js';\nimport slateToText from './util/export-adapters/txt';\n\nexport default SlateTranscriptEditor;\n\nexport { SlateTranscriptEditor, secondsToTimecode, timecodeToSeconds, shortTimecode, convertDpeToSlate, converSlateToDpe, slateToText };\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}